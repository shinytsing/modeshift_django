{% extends 'base.html' %}
{% load static %}

{% block tool_title_inner %}å‘½è¿è§£æå™¨{% endblock %}
{% block tool_title_display %}å‘½è¿è§£æå™¨{% endblock %}

{% block breadcrumb %}
<div class="breadcrumb-item">
    <a href="{% url 'tools:tools_index' %}" class="breadcrumb-link geek-breadcrumb-link">
        <i class="fas fa-wrench"></i>
        å·¥å…·é›†
    </a>
</div>
<div class="breadcrumb-item">
    <a href="{% url 'tools:fortune_analyzer' %}" class="breadcrumb-link geek-breadcrumb-link">
        <i class="fas fa-star"></i>
        å‘½è¿è§£æå™¨
    </a>
</div>
{% endblock %}

{% block content %}
<div class="fortune-container">
    <!-- å¤´éƒ¨åŒºåŸŸ -->
    <div class="fortune-header">
        <div class="fortune-title-section">
            <div class="fortune-icon">
                <i class="fas fa-star"></i>
            </div>
            <div class="fortune-title-content">
                <h1 class="fortune-main-title">å‘½è¿è§£æå™¨</h1>
                <p class="fortune-subtitle">æ¢ç´¢å‘½è¿çš„å¥¥ç§˜ï¼Œè§£è¯»äººç”Ÿçš„å¯†ç </p>
            </div>
        </div>
        <div class="fortune-decoration">
            <div class="floating-stars">
                <span class="star">â­</span>
                <span class="star">âœ¨</span>
                <span class="star">ğŸŒŸ</span>
                <span class="star">ğŸ’«</span>
            </div>
        </div>
    </div>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <div class="fortune-main-content">
        <!-- è¾“å…¥è¡¨å•åŒºåŸŸ -->
        <div class="fortune-form-section" id="formSection">
            <div class="form-card">
                <div class="form-header">
                    <h3><i class="fas fa-user"></i> ä¸ªäººä¿¡æ¯</h3>
                    <p>è¯·è¾“å…¥æ‚¨çš„åŸºæœ¬ä¿¡æ¯ï¼Œè®©æˆ‘ä»¬ä¸ºæ‚¨è§£æå‘½è¿</p>
                </div>
                
                <div class="form-content">
                    <div class="input-group">
                        <div class="input-field">
                            <label for="userName">
                                <i class="fas fa-user"></i>
                                å§“å
                            </label>
                            <input type="text" id="userName" class="modern-input" placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å">
                            <div class="input-border"></div>
                        </div>
                    </div>
                    
                    <div class="input-row">
                        <div class="input-field">
                            <label for="birthDate">
                                <i class="fas fa-calendar-alt"></i>
                                å‡ºç”Ÿæ—¥æœŸ
                            </label>
                            <input type="date" id="birthDate" class="modern-input">
                            <div class="input-border"></div>
                        </div>
                        
                        <div class="input-field">
                            <label for="birthTime">
                                <i class="fas fa-clock"></i>
                                å‡ºç”Ÿæ—¶é—´
                            </label>
                            <input type="time" id="birthTime" class="modern-input">
                            <div class="input-border"></div>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <div class="input-field">
                            <label for="userQuestion">
                                <i class="fas fa-question-circle"></i>
                                æƒ³é—®çš„é—®é¢˜ï¼ˆå¯é€‰ï¼‰
                            </label>
                            <textarea id="userQuestion" class="modern-textarea" placeholder="æ¯”å¦‚ï¼šæˆ‘çš„äº‹ä¸šå‘å±•æ–¹å‘ã€æ„Ÿæƒ…è¿åŠ¿ç­‰..."></textarea>
                            <div class="input-border"></div>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button class="analyze-btn" onclick="analyzeFortune()">
                            <i class="fas fa-magic"></i>
                            <span>å¼€å§‹è§£æå‘½è¿</span>
                            <div class="btn-shine"></div>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç»“æœå±•ç¤ºåŒºåŸŸ -->
        <div class="fortune-result-section" id="resultSection" style="display: none;">
            <div class="result-card">
                <div class="result-header">
                    <h3><i class="fas fa-star"></i> å‘½è¿è§£æç»“æœ</h3>
                    <p>åŸºäºæ‚¨çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬ä¸ºæ‚¨è§£æäº†ä»¥ä¸‹å†…å®¹</p>
                </div>
                
                <div class="result-content" id="resultContent">
                    <!-- ç»“æœå†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <div class="result-actions">
                    <button class="secondary-btn" onclick="resetForm()">
                        <i class="fas fa-redo"></i>
                        é‡æ–°è§£æ
                    </button>
                    <button class="primary-btn" onclick="shareResult()">
                        <i class="fas fa-share-alt"></i>
                        åˆ†äº«ç»“æœ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- åŠ è½½åŠ¨ç”» -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-content">
            <div class="crystal-ball">
                <div class="ball-inner"></div>
            </div>
            <p>æ­£åœ¨è§£ææ‚¨çš„å‘½è¿...</p>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
let isAnalyzing = false;

function analyzeFortune() {
    if (isAnalyzing) return;
    
    const name = document.getElementById('userName').value.trim();
    const birthDate = document.getElementById('birthDate').value;
    const birthTime = document.getElementById('birthTime').value;
    const question = document.getElementById('userQuestion').value.trim();
    
    if (!name || !birthDate) {
        showNotification('è¯·å¡«å†™å§“åå’Œå‡ºç”Ÿæ—¥æœŸ', 'warning');
        return;
    }
    
    isAnalyzing = true;
    showLoading();
    
    // æ¨¡æ‹Ÿè§£æè¿‡ç¨‹
    setTimeout(() => {
        hideLoading();
        generateFortuneResult(name, birthDate, birthTime, question);
        isAnalyzing = false;
    }, 3000);
}

function generateFortuneResult(name, birthDate, birthTime, question) {
    const fortunes = {
        overall: [
            'æ‚¨æ˜¯ä¸€ä¸ªå……æ»¡æ™ºæ…§çš„äººï¼Œæœªæ¥å°†ä¼šæœ‰é‡å¤§çªç ´',
            'æ‚¨çš„æ€§æ ¼æ¸©å’Œï¼Œäººé™…å…³ç³»è‰¯å¥½ï¼Œäº‹ä¸šæœ‰æˆ',
            'æ‚¨å…·æœ‰åˆ›æ–°ç²¾ç¥ï¼Œé€‚åˆä»äº‹æŠ€æœ¯æˆ–åˆ›æ„å·¥ä½œ',
            'æ‚¨çš„è´¢è¿äº¨é€šï¼Œä½†éœ€è¦è°¨æ…æŠ•èµ„',
            'æ‚¨çš„äººç”Ÿå……æ»¡æœºé‡ï¼Œè¦å–„äºæŠŠæ¡æœºä¼š',
            'æ‚¨çš„å­¦ä¹ èƒ½åŠ›å¾ˆå¼ºï¼Œé€‚åˆç»§ç»­æ·±é€ ',
            'æ‚¨å…·æœ‰é¢†å¯¼æ‰èƒ½ï¼Œæœªæ¥å¯èƒ½æˆä¸ºå›¢é˜Ÿæ ¸å¿ƒ',
            'æ‚¨çš„ç›´è§‰æ•é”ï¼Œç›¸ä¿¡è‡ªå·±çš„åˆ¤æ–­å¾ˆé‡è¦'
        ],
        career: [
            'æ‚¨çš„äº‹ä¸šè¿åŠ¿å¼ºåŠ²ï¼Œé€‚åˆåœ¨æŠ€æœ¯é¢†åŸŸå‘å±•',
            'æ‚¨çš„æ²Ÿé€šèƒ½åŠ›å‡ºè‰²ï¼Œé€‚åˆé”€å”®æˆ–ç®¡ç†å²—ä½',
            'æ‚¨çš„åˆ›æ„ä¸°å¯Œï¼Œå»ºè®®ä»äº‹è®¾è®¡æˆ–è‰ºæœ¯å·¥ä½œ',
            'æ‚¨çš„åˆ†æèƒ½åŠ›å¼ºï¼Œé€‚åˆé‡‘èæˆ–æ•°æ®åˆ†æ',
            'æ‚¨çš„æ‰§è¡ŒåŠ›å¼ºï¼Œé€‚åˆé¡¹ç›®ç®¡ç†æˆ–è¿è¥',
            'æ‚¨çš„å­¦ä¹ èƒ½åŠ›å¼ºï¼Œå»ºè®®ç»§ç»­æ·±é€ æå‡',
            'æ‚¨çš„äººé™…å…³ç³»å¥½ï¼Œé€‚åˆå›¢é˜Ÿåä½œå·¥ä½œ',
            'æ‚¨çš„æŠ—å‹èƒ½åŠ›å¼ºï¼Œé€‚åˆé«˜å‹å·¥ä½œç¯å¢ƒ'
        ],
        love: [
            'æ‚¨çš„æ„Ÿæƒ…ç”Ÿæ´»ä¸°å¯Œå¤šå½©ï¼Œä½†éœ€è¦è€å¿ƒç­‰å¾…çœŸçˆ±',
            'æ‚¨çš„æ¡ƒèŠ±è¿æ—ºç››ï¼Œä»Šå¹´å¯èƒ½é‡åˆ°å¿ƒä»ªå¯¹è±¡',
            'æ‚¨çš„æ„Ÿæƒ…ç¨³å®šï¼Œä¸ä¼´ä¾£å…³ç³»å’Œè°',
            'æ‚¨éœ€è¦å¤šå…³æ³¨ä¼´ä¾£çš„æ„Ÿå—ï¼Œå¢è¿›æ²Ÿé€š',
            'æ‚¨çš„é­…åŠ›å€¼å¾ˆé«˜ï¼Œå®¹æ˜“å¸å¼•å¼‚æ€§æ³¨æ„',
            'æ‚¨çš„æ„Ÿæƒ…ç»å†ä¸°å¯Œï¼Œæœ‰åŠ©äºæ‰¾åˆ°çœŸçˆ±',
            'æ‚¨çš„ä¸“ä¸€ç¨‹åº¦é«˜ï¼Œæ˜¯ç†æƒ³çš„ä¼´ä¾£äººé€‰',
            'æ‚¨çš„æ„Ÿæƒ…è¿åŠ¿ä¸Šå‡ï¼Œå•èº«è€…æœ‰æœ›è„±å•'
        ],
        health: [
            'æ‚¨çš„å¥åº·çŠ¶å†µè‰¯å¥½ï¼Œå»ºè®®å¤šè¿åŠ¨ä¿æŒæ´»åŠ›',
            'æ‚¨éœ€è¦æ³¨æ„ä½œæ¯è§„å¾‹ï¼Œä¿è¯å……è¶³ç¡çœ ',
            'æ‚¨çš„ä½“è´¨ä¸é”™ï¼Œä½†éœ€è¦åŠ å¼ºé”»ç‚¼',
            'æ‚¨çš„å¿ƒæ€ç§¯æï¼Œæœ‰åŠ©äºèº«å¿ƒå¥åº·',
            'æ‚¨çš„å·¥ä½œå‹åŠ›è¾ƒå¤§ï¼Œéœ€è¦é€‚å½“æ”¾æ¾',
            'æ‚¨çš„é¥®é£Ÿä¹ æƒ¯è‰¯å¥½ï¼Œç»§ç»­ä¿æŒ',
            'æ‚¨çš„ç²¾ç¥çŠ¶æ€ä½³ï¼Œé€‚åˆæŒ‘æˆ˜æ–°äº‹ç‰©',
            'æ‚¨éœ€è¦å¤šå…³æ³¨å¿ƒç†å¥åº·ï¼Œä¿æŒä¹è§‚'
        ],
        wealth: [
            'æ‚¨çš„è´¢è¿äº¨é€šï¼Œä½†éœ€è¦è°¨æ…æŠ•èµ„',
            'æ‚¨çš„ç†è´¢èƒ½åŠ›ä¸é”™ï¼Œå»ºè®®å­¦ä¹ æŠ•èµ„çŸ¥è¯†',
            'æ‚¨çš„æ”¶å…¥ç¨³å®šï¼Œé€‚åˆç¨³å¥ç†è´¢',
            'æ‚¨çš„åè´¢è¿å¥½ï¼Œå¯èƒ½æœ‰æ„å¤–æ”¶è·',
            'æ‚¨éœ€è¦æ§åˆ¶æ¶ˆè´¹ï¼Œåˆç†è§„åˆ’æ”¯å‡º',
            'æ‚¨çš„æŠ•èµ„çœ¼å…‰ç‹¬åˆ°ï¼Œé€‚åˆé•¿æœŸæŠ•èµ„',
            'æ‚¨çš„è´¢å¯Œç§¯ç´¯èƒ½åŠ›å¼ºï¼Œæœªæ¥å¯æœŸ',
            'æ‚¨éœ€è¦é¿å…å†²åŠ¨æ¶ˆè´¹ï¼Œç†æ€§ç†è´¢'
        ]
    };
    
    const getRandomFortune = (category) => {
        const items = fortunes[category];
        return items[Math.floor(Math.random() * items.length)];
    };
    
    const resultContent = document.getElementById('resultContent');
    resultContent.innerHTML = `
        <div class="fortune-grid">
            <div class="fortune-card overall">
                <div class="card-header">
                    <i class="fas fa-star"></i>
                    <h4>æ€»ä½“è¿åŠ¿</h4>
                </div>
                <div class="card-content">
                    <p>${getRandomFortune('overall')}</p>
                </div>
                <div class="card-footer">
                    <span class="fortune-score">è¿åŠ¿æŒ‡æ•°: ${Math.floor(Math.random() * 30) + 70}%</span>
                </div>
            </div>
            
            <div class="fortune-card career">
                <div class="card-header">
                    <i class="fas fa-briefcase"></i>
                    <h4>äº‹ä¸šè¿åŠ¿</h4>
                </div>
                <div class="card-content">
                    <p>${getRandomFortune('career')}</p>
                </div>
                <div class="card-footer">
                    <span class="fortune-score">è¿åŠ¿æŒ‡æ•°: ${Math.floor(Math.random() * 30) + 70}%</span>
                </div>
            </div>
            
            <div class="fortune-card love">
                <div class="card-header">
                    <i class="fas fa-heart"></i>
                    <h4>æ„Ÿæƒ…è¿åŠ¿</h4>
                </div>
                <div class="card-content">
                    <p>${getRandomFortune('love')}</p>
                </div>
                <div class="card-footer">
                    <span class="fortune-score">è¿åŠ¿æŒ‡æ•°: ${Math.floor(Math.random() * 30) + 70}%</span>
                </div>
            </div>
            
            <div class="fortune-card health">
                <div class="card-header">
                    <i class="fas fa-heartbeat"></i>
                    <h4>å¥åº·è¿åŠ¿</h4>
                </div>
                <div class="card-content">
                    <p>${getRandomFortune('health')}</p>
                </div>
                <div class="card-footer">
                    <span class="fortune-score">è¿åŠ¿æŒ‡æ•°: ${Math.floor(Math.random() * 30) + 70}%</span>
                </div>
            </div>
            
            <div class="fortune-card wealth">
                <div class="card-header">
                    <i class="fas fa-coins"></i>
                    <h4>è´¢è¿åˆ†æ</h4>
                </div>
                <div class="card-content">
                    <p>${getRandomFortune('wealth')}</p>
                </div>
                <div class="card-footer">
                    <span class="fortune-score">è¿åŠ¿æŒ‡æ•°: ${Math.floor(Math.random() * 30) + 70}%</span>
                </div>
            </div>
        </div>
        
        <div class="fortune-summary">
            <div class="summary-header">
                <i class="fas fa-lightbulb"></i>
                <h4>å‘½è¿å»ºè®®</h4>
            </div>
            <div class="summary-content">
                <p>äº²çˆ±çš„ <strong>${name}</strong>ï¼Œæ ¹æ®æ‚¨çš„å‡ºç”Ÿä¿¡æ¯åˆ†æï¼Œå»ºè®®æ‚¨ï¼š</p>
                <ul>
                    <li>ä¿æŒç§¯æä¹è§‚çš„å¿ƒæ€ï¼Œç›¸ä¿¡è‡ªå·±çš„èƒ½åŠ›</li>
                    <li>å¤šå…³æ³¨èº«è¾¹çš„äººé™…å…³ç³»ï¼Œçæƒœå‹æƒ…å’Œäº²æƒ…</li>
                    <li>åœ¨äº‹ä¸šä¸Šå‹‡äºå°è¯•æ–°äº‹ç‰©ï¼Œå‘æŒ¥è‡ªå·±çš„ä¼˜åŠ¿</li>
                    <li>æ³¨æ„èº«ä½“å¥åº·ï¼Œä¿æŒè§„å¾‹çš„ç”Ÿæ´»ä½œæ¯</li>
                    <li>åˆç†è§„åˆ’è´¢åŠ¡ï¼Œé¿å…ä¸å¿…è¦çš„æ”¯å‡º</li>
                </ul>
            </div>
        </div>
    `;
    
    // æ˜¾ç¤ºç»“æœåŒºåŸŸ
    document.getElementById('resultSection').style.display = 'block';
    
    // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
    setTimeout(() => {
        document.getElementById('resultSection').scrollIntoView({ 
            behavior: 'smooth' 
        });
    }, 100);
    
    showNotification('å‘½è¿è§£æå®Œæˆï¼', 'success');
}

function showLoading() {
    document.getElementById('loadingOverlay').style.display = 'flex';
}

function hideLoading() {
    document.getElementById('loadingOverlay').style.display = 'none';
}

function resetForm() {
    document.getElementById('userName').value = '';
    document.getElementById('birthDate').value = '';
    document.getElementById('birthTime').value = '';
    document.getElementById('userQuestion').value = '';
    document.getElementById('resultSection').style.display = 'none';
    document.getElementById('formSection').scrollIntoView({ 
        behavior: 'smooth' 
    });
}

function shareResult() {
    if (navigator.share) {
        navigator.share({
            title: 'æˆ‘çš„å‘½è¿è§£æç»“æœ',
            text: 'æ¥çœ‹çœ‹æˆ‘çš„å‘½è¿è§£æç»“æœå§ï¼',
            url: window.location.href
        });
    } else {
        // å¤åˆ¶é“¾æ¥åˆ°å‰ªè´´æ¿
        navigator.clipboard.writeText(window.location.href).then(() => {
            showNotification('é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');
        });
    }
}

// é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', function() {
    // æ·»åŠ è¾“å…¥æ¡†ç„¦ç‚¹æ•ˆæœ
    const inputs = document.querySelectorAll('.modern-input, .modern-textarea');
    inputs.forEach(input => {
        input.addEventListener('focus', function() {
            this.parentElement.classList.add('focused');
        });
        
        input.addEventListener('blur', function() {
            if (!this.value) {
                this.parentElement.classList.remove('focused');
            }
        });
    });
});
</script>

<style>
/* ä¸»å®¹å™¨æ ·å¼ */
.fortune-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
    min-height: 100vh;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
    background-size: 400% 400%;
    animation: gradientShift 15s ease infinite;
    position: relative;
    overflow: hidden;
}

@keyframes gradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* ç¥ç§˜ç²’å­èƒŒæ™¯ */
.fortune-container::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
        radial-gradient(circle at 20% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 60%, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
    z-index: 0;
    animation: particleFloat 20s ease-in-out infinite;
}

@keyframes particleFloat {
    0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.5; }
    50% { transform: translateY(-20px) rotate(180deg); opacity: 1; }
}

/* å¤´éƒ¨åŒºåŸŸæ ·å¼ */
.fortune-header {
    text-align: center;
    margin-bottom: 3rem;
    position: relative;
    z-index: 1;
}

.fortune-title-section {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1.5rem;
    margin-bottom: 1rem;
}

.fortune-icon {
    width: 100px;
    height: 100px;
    background: linear-gradient(135deg, #ff6b6b 0%, #feca57 25%, #48dbfb 50%, #ff9ff3 75%, #54a0ff 100%);
    background-size: 300% 300%;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 
        0 20px 40px rgba(255, 107, 107, 0.4),
        0 0 0 4px rgba(255, 255, 255, 0.1),
        inset 0 0 0 1px rgba(255, 255, 255, 0.2);
    animation: iconGlow 4s ease-in-out infinite, float 3s ease-in-out infinite;
    position: relative;
    overflow: hidden;
}

.fortune-icon::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    animation: iconShine 3s ease-in-out infinite;
}

.fortune-icon i {
    font-size: 3rem;
    color: white;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    z-index: 1;
    position: relative;
}

@keyframes iconGlow {
    0%, 100% { 
        background-position: 0% 50%;
        box-shadow: 
            0 20px 40px rgba(255, 107, 107, 0.4),
            0 0 0 4px rgba(255, 255, 255, 0.1),
            inset 0 0 0 1px rgba(255, 255, 255, 0.2);
    }
    50% { 
        background-position: 100% 50%;
        box-shadow: 
            0 20px 40px rgba(255, 107, 107, 0.6),
            0 0 0 4px rgba(255, 255, 255, 0.2),
            inset 0 0 0 1px rgba(255, 255, 255, 0.3);
    }
}

@keyframes iconShine {
    0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
    50% { transform: translateX(100%) translateY(100%) rotate(45deg); }
    100% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
}

.fortune-main-title {
    font-size: 3.5rem;
    font-weight: 800;
    background: linear-gradient(135deg, #ff6b6b 0%, #feca57 25%, #48dbfb 50%, #ff9ff3 75%, #54a0ff 100%);
    background-size: 300% 300%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin: 0;
    animation: titleGlow 4s ease-in-out infinite;
    text-shadow: 0 0 30px rgba(255, 107, 107, 0.5);
}

.fortune-subtitle {
    font-size: 1.3rem;
    color: rgba(255, 255, 255, 0.9);
    margin: 0.5rem 0 0 0;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    font-weight: 300;
    letter-spacing: 1px;
}

@keyframes titleGlow {
    0%, 100% { 
        background-position: 0% 50%;
        text-shadow: 0 0 30px rgba(255, 107, 107, 0.5);
    }
    50% { 
        background-position: 100% 50%;
        text-shadow: 0 0 50px rgba(255, 107, 107, 0.8);
    }
}

.fortune-decoration {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    overflow: hidden;
}

.floating-stars {
    position: relative;
    height: 100%;
}

.star {
    position: absolute;
    font-size: 1.5rem;
    animation: twinkle 2s ease-in-out infinite;
    opacity: 0.6;
}

.star:nth-child(1) { top: 20%; left: 10%; animation-delay: 0s; }
.star:nth-child(2) { top: 40%; right: 15%; animation-delay: 0.5s; }
.star:nth-child(3) { top: 60%; left: 20%; animation-delay: 1s; }
.star:nth-child(4) { top: 80%; right: 10%; animation-delay: 1.5s; }

/* ä¸»è¦å†…å®¹åŒºåŸŸ */
.fortune-main-content {
    display: flex;
    flex-direction: column;
    gap: 2rem;
    position: relative;
    z-index: 1;
}

/* è¡¨å•åŒºåŸŸæ ·å¼ */
.fortune-form-section {
    width: 100%;
}

.form-card {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 25px;
    padding: 3rem;
    box-shadow: 
        0 20px 40px rgba(0, 0, 0, 0.2),
        0 0 0 1px rgba(255, 255, 255, 0.1),
        inset 0 0 0 1px rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(20px);
    position: relative;
    overflow: hidden;
}

.form-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
    z-index: -1;
}

.form-header {
    text-align: center;
    margin-bottom: 2.5rem;
}

.form-header h3 {
    font-size: 2rem;
    color: rgba(255, 255, 255, 0.95);
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.form-header p {
    color: rgba(255, 255, 255, 0.8);
    font-size: 1.1rem;
    margin: 0;
    text-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);
}

/* è¾“å…¥æ¡†æ ·å¼ */
.input-group, .input-row {
    margin-bottom: 2rem;
}

.input-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
}

.input-field {
    position: relative;
}

.input-field label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: rgba(255, 255, 255, 0.9);
    font-weight: 600;
    margin-bottom: 0.8rem;
    font-size: 1rem;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

.input-field label i {
    color: #ff6b6b;
    font-size: 1.1rem;
}

.modern-input, .modern-textarea {
    width: 100%;
    padding: 1rem 1.2rem;
    background: rgba(255, 255, 255, 0.1);
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: 15px;
    color: rgba(255, 255, 255, 0.95);
    font-size: 1rem;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
    box-shadow: 
        0 5px 15px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.modern-input::placeholder, .modern-textarea::placeholder {
    color: rgba(255, 255, 255, 0.6);
}

.modern-input:focus, .modern-textarea:focus {
    outline: none;
    border-color: #ff6b6b;
    box-shadow: 
        0 0 0 3px rgba(255, 107, 107, 0.2),
        0 10px 25px rgba(0, 0, 0, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    transform: translateY(-2px);
}

.modern-textarea {
    min-height: 120px;
    resize: vertical;
    font-family: inherit;
}

/* æŒ‰é’®æ ·å¼ */
.analyze-btn {
    background: linear-gradient(135deg, #ff6b6b 0%, #feca57 25%, #48dbfb 50%, #ff9ff3 75%, #54a0ff 100%);
    background-size: 300% 300%;
    color: white;
    border: none;
    padding: 1.2rem 3rem;
    border-radius: 20px;
    font-size: 1.1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    box-shadow: 
        0 10px 30px rgba(255, 107, 107, 0.4),
        0 0 0 1px rgba(255, 255, 255, 0.1);
    animation: buttonGlow 4s ease-in-out infinite;
}

.analyze-btn:hover {
    transform: translateY(-3px);
    box-shadow: 
        0 15px 40px rgba(255, 107, 107, 0.6),
        0 0 0 1px rgba(255, 255, 255, 0.2);
}

.analyze-btn:active {
    transform: translateY(-1px);
}

.btn-shine {
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.6s ease;
}

.analyze-btn:hover .btn-shine {
    left: 100%;
}

@keyframes buttonGlow {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
}

.form-header p {
    color: var(--geek-text-muted);
    font-size: 1rem;
}

.form-content {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.input-group {
    width: 100%;
}

.input-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
}

.input-field {
    position: relative;
    width: 100%;
}

.input-field label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
    color: var(--geek-text);
    margin-bottom: 0.5rem;
    font-size: 0.95rem;
}

.modern-input,
.modern-textarea {
    width: 100%;
    padding: 1rem 1.2rem;
    border: 2px solid var(--geek-border);
    border-radius: 12px;
    background: var(--geek-bg);
    color: var(--geek-text);
    font-size: 1rem;
    transition: all 0.3s ease;
    outline: none;
}

.modern-textarea {
    min-height: 100px;
    resize: vertical;
}

.modern-input:focus,
.modern-textarea:focus {
    border-color: var(--geek-primary);
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    transform: translateY(-2px);
}

.input-border {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    transition: width 0.3s ease;
}

.input-field.focused .input-border {
    width: 100%;
}

/* æŒ‰é’®æ ·å¼ */
.form-actions {
    display: flex;
    justify-content: center;
    margin-top: 2rem;
}

.analyze-btn {
    position: relative;
    padding: 1rem 2.5rem;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    border-radius: 50px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    overflow: hidden;
    transition: all 0.3s ease;
    box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
}

.analyze-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
}

.analyze-btn:active {
    transform: translateY(-1px);
}

.btn-shine {
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.5s ease;
}

.analyze-btn:hover .btn-shine {
    left: 100%;
}

/* ç»“æœåŒºåŸŸæ ·å¼ */
.fortune-result-section {
    width: 100%;
}

.result-card {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 25px;
    padding: 3rem;
    box-shadow: 
        0 20px 40px rgba(0, 0, 0, 0.2),
        0 0 0 1px rgba(255, 255, 255, 0.1),
        inset 0 0 0 1px rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(20px);
    position: relative;
    overflow: hidden;
}

.result-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
    z-index: -1;
}

.result-header {
    text-align: center;
    margin-bottom: 2.5rem;
}

.result-header h3 {
    font-size: 2rem;
    color: rgba(255, 255, 255, 0.95);
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.result-header p {
    color: rgba(255, 255, 255, 0.8);
    font-size: 1.1rem;
    text-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);
}

/* å‘½è¿å¡ç‰‡ç½‘æ ¼ */
.fortune-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.fortune-card {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 20px;
    padding: 2rem;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(10px);
    box-shadow: 
        0 10px 25px rgba(0, 0, 0, 0.1),
        0 0 0 1px rgba(255, 255, 255, 0.05);
}

.fortune-card:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 
        0 20px 40px rgba(0, 0, 0, 0.2),
        0 0 0 1px rgba(255, 255, 255, 0.1);
}

.fortune-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(135deg, #ff6b6b 0%, #feca57 25%, #48dbfb 50%, #ff9ff3 75%, #54a0ff 100%);
    background-size: 300% 300%;
    animation: cardGlow 4s ease-in-out infinite;
}

@keyframes cardGlow {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
}

.card-header {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    margin-bottom: 1.5rem;
}

.card-header i {
    font-size: 1.5rem;
    color: #ff6b6b;
    text-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
}

.card-header h4 {
    font-size: 1.3rem;
    font-weight: 700;
    color: rgba(255, 255, 255, 0.95);
    margin: 0;
    text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
}

.card-content p {
    color: rgba(255, 255, 255, 0.9);
    line-height: 1.7;
    margin: 0 0 1.5rem 0;
    font-size: 1.05rem;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.card-footer {
    display: flex;
    justify-content: flex-end;
    align-items: center;
}

.fortune-score {
    background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-weight: 600;
    font-size: 0.9rem;
    box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3);
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

.fortune-score {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 0.3rem 0.8rem;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 600;
}

/* å‘½è¿æ€»ç»“ */
.fortune-summary {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
    border: 1px solid var(--geek-border);
    border-radius: 16px;
    padding: 2rem;
    margin-top: 2rem;
}

.summary-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1rem;
}

.summary-header i {
    font-size: 1.2rem;
    color: var(--geek-primary);
}

.summary-header h4 {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--geek-text);
    margin: 0;
}

.summary-content p {
    color: var(--geek-text-muted);
    line-height: 1.6;
    margin-bottom: 1rem;
}

.summary-content ul {
    color: var(--geek-text-muted);
    line-height: 1.8;
    padding-left: 1.5rem;
}

.summary-content li {
    margin-bottom: 0.5rem;
}

/* ç»“æœæ“ä½œæŒ‰é’® */
.result-actions {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-top: 2rem;
}

.primary-btn,
.secondary-btn {
    padding: 0.8rem 1.5rem;
    border: none;
    border-radius: 25px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: all 0.3s ease;
}

.primary-btn {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
}

.secondary-btn {
    background: var(--geek-bg);
    color: var(--geek-text);
    border: 2px solid var(--geek-border);
}

.primary-btn:hover,
.secondary-btn:hover {
    transform: translateY(-2px);
}

.primary-btn:hover {
    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
}

/* åŠ è½½åŠ¨ç”» */
.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    backdrop-filter: blur(5px);
}

.loading-content {
    text-align: center;
    color: white;
}

.crystal-ball {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    background: linear-gradient(135deg, #ff6b6b 0%, #feca57 25%, #48dbfb 50%, #ff9ff3 75%, #54a0ff 100%);
    background-size: 300% 300%;
    margin: 0 auto 2rem;
    position: relative;
    animation: crystalFloat 2s ease-in-out infinite, crystalGlow 4s ease-in-out infinite;
    box-shadow: 
        0 20px 40px rgba(255, 107, 107, 0.4),
        0 0 0 4px rgba(255, 255, 255, 0.1),
        inset 0 0 0 1px rgba(255, 255, 255, 0.2);
}

.ball-inner {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.2);
    animation: innerGlow 2s ease-in-out infinite;
    backdrop-filter: blur(5px);
}

.loading-content p {
    font-size: 1.2rem;
    font-weight: 600;
    margin: 0;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
    animation: textPulse 2s ease-in-out infinite;
}

@keyframes textPulse {
    0%, 100% { opacity: 0.7; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.05); }
}

@keyframes innerGlow {
    0%, 100% { 
        background: rgba(255, 255, 255, 0.2);
        transform: translate(-50%, -50%) scale(1);
    }
    50% { 
        background: rgba(255, 255, 255, 0.4);
        transform: translate(-50%, -50%) scale(1.1);
    }
}

@keyframes crystalGlow {
    0%, 100% { 
        background-position: 0% 50%;
        box-shadow: 
            0 20px 40px rgba(255, 107, 107, 0.4),
            0 0 0 4px rgba(255, 255, 255, 0.1),
            inset 0 0 0 1px rgba(255, 255, 255, 0.2);
    }
    50% { 
        background-position: 100% 50%;
        box-shadow: 
            0 20px 40px rgba(255, 107, 107, 0.6),
            0 0 0 4px rgba(255, 255, 255, 0.2),
            inset 0 0 0 1px rgba(255, 255, 255, 0.3);
    }
}

/* åŠ¨ç”»å®šä¹‰ */
@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

@keyframes twinkle {
    0%, 100% { opacity: 0.6; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.2); }
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
    .fortune-container {
        padding: 1rem;
    }
    
    .fortune-main-title {
        font-size: 2rem;
    }
    
    .fortune-title-section {
        flex-direction: column;
        gap: 1rem;
    }
    
    .fortune-icon {
        width: 60px;
        height: 60px;
    }
    
    .fortune-icon i {
        font-size: 2rem;
    }
    
    .input-row {
        grid-template-columns: 1fr;
    }
    
    .fortune-grid {
        grid-template-columns: 1fr;
    }
    
    .result-actions {
        flex-direction: column;
        align-items: center;
    }
    
    .form-card,
    .result-card {
        padding: 1.5rem;
    }
}

@media (max-width: 480px) {
    .fortune-main-title {
        font-size: 1.5rem;
    }
    
    .fortune-subtitle {
        font-size: 1rem;
    }
    
    .form-card,
    .result-card {
        padding: 1rem;
    }
    
    .analyze-btn {
        padding: 0.8rem 2rem;
        font-size: 1rem;
    }
}
</style>
{% endblock %} 