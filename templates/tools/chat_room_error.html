{% extends 'base.html' %}
{% load static %}

{% block title %}èŠå¤©å®¤é”™è¯¯{% endblock %}

{% block extra_css %}
<style>
.error-container {
    min-height: 100vh;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

.error-card {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    padding: 40px;
    text-align: center;
    max-width: 500px;
    width: 100%;
    backdrop-filter: blur(10px);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    color: white;
}

.error-icon {
    font-size: 4em;
    margin-bottom: 20px;
    opacity: 0.8;
}

.error-title {
    font-size: 2em;
    margin-bottom: 15px;
    font-weight: 600;
}

.error-message {
    font-size: 1.1em;
    margin-bottom: 30px;
    opacity: 0.9;
    line-height: 1.6;
}

.error-details {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 30px;
    text-align: left;
}

.error-details h4 {
    margin-top: 0;
    margin-bottom: 10px;
    color: #ffd700;
}

.error-details ul {
    margin: 0;
    padding-left: 20px;
}

.error-details li {
    margin-bottom: 5px;
    opacity: 0.9;
}

.action-buttons {
    display: flex;
    gap: 15px;
    justify-content: center;
    flex-wrap: wrap;
}

.action-button {
    background: linear-gradient(45deg, #667eea, #764ba2);
    color: white;
    border: none;
    border-radius: 25px;
    padding: 12px 25px;
    font-size: 1em;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.action-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    text-decoration: none;
    color: white;
}

.action-button.secondary {
    background: linear-gradient(45deg, #6c757d, #495057);
}

.action-button.danger {
    background: linear-gradient(45deg, #dc3545, #c82333);
}

.action-button.success {
    background: linear-gradient(45deg, #28a745, #20c997);
}

.room-info {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    padding: 15px;
    margin-bottom: 20px;
    font-family: monospace;
    font-size: 0.9em;
    word-break: break-all;
}

.suggestions {
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px solid rgba(255, 255, 255, 0.2);
}

.suggestions h4 {
    margin-bottom: 15px;
    color: #ffd700;
}

.suggestion-item {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
    padding: 8px 0;
}

.suggestion-icon {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.8em;
}

@media (max-width: 768px) {
    .error-card {
        padding: 30px 20px;
    }
    
    .error-title {
        font-size: 1.5em;
    }
    
    .action-buttons {
        flex-direction: column;
        align-items: center;
    }
    
    .action-button {
        width: 100%;
        max-width: 250px;
        justify-content: center;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="error-container">
    <div class="error-card">
        <div class="error-icon">
            {% if error_type == 'not_found' %}
                ğŸ”
            {% elif error_type == 'ended' %}
                â°
            {% elif error_type == 'no_permission' %}
                ğŸš«
            {% else %}
                âŒ
            {% endif %}
        </div>
        
        <h1 class="error-title">
            {% if error_type == 'not_found' %}
                èŠå¤©å®¤ä¸å­˜åœ¨
            {% elif error_type == 'ended' %}
                èŠå¤©å®¤å·²ç»“æŸ
            {% elif error_type == 'no_permission' %}
                è®¿é—®è¢«æ‹’ç»
            {% else %}
                èŠå¤©å®¤é”™è¯¯
            {% endif %}
        </h1>
        
        <p class="error-message">
            {% if error_type == 'not_found' %}
                æŠ±æ­‰ï¼Œæ‚¨è¦è®¿é—®çš„èŠå¤©å®¤ä¸å­˜åœ¨æˆ–å·²è¢«åˆ é™¤ã€‚
            {% elif error_type == 'ended' %}
                è¿™ä¸ªèŠå¤©å®¤å·²ç»ç»“æŸï¼Œæ— æ³•ç»§ç»­è®¿é—®ã€‚
            {% elif error_type == 'no_permission' %}
                æ‚¨æ²¡æœ‰æƒé™è®¿é—®è¿™ä¸ªèŠå¤©å®¤ã€‚
            {% else %}
                {{ error_message|default:"è®¿é—®èŠå¤©å®¤æ—¶å‘ç”Ÿé”™è¯¯ã€‚" }}
            {% endif %}
        </p>
        
        {% if room_id %}
        <div class="room-info">
            <strong>èŠå¤©å®¤ID:</strong> {{ room_id }}
        </div>
        {% endif %}
        
        <div class="error-details">
            <h4>å¯èƒ½çš„åŸå› ï¼š</h4>
            <ul>
                {% if error_type == 'not_found' %}
                    <li>èŠå¤©å®¤IDè¾“å…¥é”™è¯¯</li>
                    <li>èŠå¤©å®¤å·²è¢«ç®¡ç†å‘˜åˆ é™¤</li>
                    <li>é“¾æ¥å·²è¿‡æœŸ</li>
                {% elif error_type == 'ended' %}
                    <li>èŠå¤©å®¤è¶…è¿‡æœ€å¤§æ—¶é•¿é™åˆ¶</li>
                    <li>æ‰€æœ‰å‚ä¸è€…éƒ½å·²ç¦»å¼€</li>
                    <li>ç³»ç»Ÿè‡ªåŠ¨æ¸…ç†äº†ä¸æ´»è·ƒçš„èŠå¤©å®¤</li>
                {% elif error_type == 'no_permission' %}
                    <li>æ‚¨ä¸æ˜¯è¯¥èŠå¤©å®¤çš„å‚ä¸è€…</li>
                    <li>éœ€è¦é‡æ–°è¿›è¡ŒåŒ¹é…</li>
                    <li>èŠå¤©å®¤æƒé™è®¾ç½®å·²æ›´æ”¹</li>
                {% else %}
                    <li>ç½‘ç»œè¿æ¥é—®é¢˜</li>
                    <li>æœåŠ¡å™¨æš‚æ—¶ä¸å¯ç”¨</li>
                    <li>è¯·ç¨åé‡è¯•</li>
                {% endif %}
            </ul>
        </div>
        
        <div class="action-buttons">
            <a href="{% url 'tools:heart_link' %}" class="action-button">
                <i class="fas fa-heart"></i>
                é‡æ–°åŒ¹é…
            </a>
            
            <a href="{% url 'tools:heart_link' %}" class="action-button secondary">
                <i class="fas fa-comments"></i>
                å¿ƒåŠ¨é“¾æ¥
            </a>
            
            <a href="{% url 'tools:number_match' %}" class="action-button success">
                <i class="fas fa-hashtag"></i>
                æ•°å­—åŒ¹é…
            </a>
            
            <a href="{% url 'home' %}" class="action-button">
                <i class="fas fa-home"></i>
                è¿”å›é¦–é¡µ
            </a>
        </div>
        
        <div class="suggestions">
            <h4>ğŸ’¡ å»ºè®®ï¼š</h4>
            <div class="suggestion-item">
                <div class="suggestion-icon">1</div>
                <span>å°è¯•é‡æ–°è¿›è¡Œå¿ƒåŠ¨é“¾æ¥åŒ¹é…</span>
            </div>
            <div class="suggestion-item">
                <div class="suggestion-icon">2</div>
                <span>ä½¿ç”¨æ•°å­—åŒ¹é…åŠŸèƒ½å¿«é€Ÿæ‰¾åˆ°èŠå¤©å¯¹è±¡</span>
            </div>
            <div class="suggestion-item">
                <div class="suggestion-icon">3</div>
                <span>æ£€æŸ¥ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸</span>
            </div>
            <div class="suggestion-item">
                <div class="suggestion-icon">4</div>
                <span>å¦‚æœé—®é¢˜æŒç»­ï¼Œè¯·è”ç³»ç®¡ç†å‘˜</span>
            </div>
        </div>
    </div>
</div>

<script>
// é¡µé¢åŠ è½½æ—¶çš„åŠ¨ç”»æ•ˆæœ
document.addEventListener('DOMContentLoaded', function() {
    const errorCard = document.querySelector('.error-card');
    errorCard.style.opacity = '0';
    errorCard.style.transform = 'translateY(20px)';
    
    setTimeout(() => {
        errorCard.style.transition = 'all 0.5s ease';
        errorCard.style.opacity = '1';
        errorCard.style.transform = 'translateY(0)';
    }, 100);
});

// æ·»åŠ æŒ‰é’®ç‚¹å‡»æ•ˆæœ
document.querySelectorAll('.action-button').forEach(button => {
    button.addEventListener('click', function(e) {
        // æ·»åŠ ç‚¹å‡»æ³¢çº¹æ•ˆæœ
        const ripple = document.createElement('span');
        const rect = this.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        const x = e.clientX - rect.left - size / 2;
        const y = e.clientY - rect.top - size / 2;
        
        ripple.style.width = ripple.style.height = size + 'px';
        ripple.style.left = x + 'px';
        ripple.style.top = y + 'px';
        ripple.classList.add('ripple');
        
        this.appendChild(ripple);
        
        setTimeout(() => {
            ripple.remove();
        }, 600);
    });
});

// æ·»åŠ é”®ç›˜å¿«æ·é”®
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        // ESCé”®è¿”å›é¦–é¡µ
        window.location.href = "{% url 'home' %}";
    } else if (e.key === 'Enter') {
        // Enteré”®é‡æ–°åŒ¹é…
        window.location.href = "{% url 'tools:heart_link' %}";
    }
});

// æ˜¾ç¤ºé”™è¯¯è¯¦æƒ…ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
{% if error_details %}

{% endif %}
</script>
{% endblock %}
