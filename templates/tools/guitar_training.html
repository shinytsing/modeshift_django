{% extends 'base.html' %}
{% load static %}

{% block tool_title_inner %}üé∏ ‰∏çÊëáÂ∞±Êªö - Âêâ‰ªñËÆ≠ÁªÉÁ≥ªÁªü{% endblock %}
{% block tool_title_display %}üé∏ ‰∏çÊëáÂ∞±Êªö - Âêâ‰ªñËÆ≠ÁªÉÁ≥ªÁªü{% endblock %}

{% block extra_css %}
<style>


/* Âêâ‰ªñËÆ≠ÁªÉÁ≥ªÁªüÊ†∑Âºè */
.guitar-training-container {
  min-height: 100vh;
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 25%, #0f3460 50%, #533483 75%, #e94560 100%);
  color: #ffffff;
  font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;
  padding: 2rem;
  position: relative;
  overflow: hidden;
}

/* ÊµÆÂä®Èü≥Á¨¶ËÉåÊôØ */
.floating-notes {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 0;
}

.note {
  position: absolute;
  font-size: 2rem;
  opacity: 0.3;
  animation: floatNote 8s ease-in-out infinite;
}

@keyframes floatNote {
  0%, 100% { 
    transform: translateY(0px) rotate(0deg);
    opacity: 0.3;
  }
  50% { 
    transform: translateY(-20px) rotate(180deg);
    opacity: 0.6;
  }
}

/* Â§¥ÈÉ®Ê†∑Âºè */
.guitar-header {
  text-align: center;
  margin-bottom: 40px;
  padding: 40px 0;
  position: relative;
  z-index: 1;
}

.guitar-title {
  font-size: 3.5rem;
  font-weight: 900;
  color: #ffffff;
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 20px;
  text-shadow: 0 4px 20px rgba(233, 69, 96, 0.5);
}

.guitar-title i {
  font-size: 3rem;
  animation: guitarPulse 2s ease-in-out infinite;
}

@keyframes guitarPulse {
  0%, 100% { 
    transform: scale(1) rotate(0deg);
  }
  50% { 
    transform: scale(1.1) rotate(5deg);
  }
}

.guitar-subtitle {
  font-size: 1.3rem;
  color: rgba(255,255,255,0.9);
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 2px;
  animation: subtitleFloat 4s ease-in-out infinite;
}

@keyframes subtitleFloat {
  0%, 100% { transform: translateY(0px); opacity: 0.9; }
  50% { transform: translateY(-5px); opacity: 1; }
}

/* ÂäüËÉΩÁΩëÊ†º */
.guitar-tools-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 2.5rem;
  max-width: 1400px;
  margin: 0 auto;
  position: relative;
  z-index: 1;
}

.guitar-card {
  background: linear-gradient(135deg, rgba(233, 69, 96, 0.1) 0%, rgba(83, 52, 131, 0.1) 100%);
  border: 2px solid rgba(233, 69, 96, 0.3);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(233, 69, 96, 0.2);
  backdrop-filter: blur(20px);
  transition: all 0.4s ease;
  padding: 28px;
  text-align: center;
  cursor: pointer;
  position: relative;
  overflow: hidden;
}

.guitar-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(233, 69, 96, 0.1), transparent);
  transition: left 0.6s ease;
}

.guitar-card:hover::before {
  left: 100%;
}

.guitar-card:hover {
  border-color: rgba(233, 69, 96, 0.6);
  transform: translateY(-8px) scale(1.02);
  box-shadow: 0 20px 60px rgba(233, 69, 96, 0.3);
}

.guitar-icon {
  font-size: 4rem;
  color: #e94560;
  margin-bottom: 1.5rem;
  animation: iconFloat 3s ease-in-out infinite;
}

@keyframes iconFloat {
  0%, 100% { 
    transform: translateY(0px);
  }
  50% { 
    transform: translateY(-10px);
  }
}

.guitar-title-text {
  font-size: 1.8rem;
  font-weight: 700;
  color: #ffffff;
  margin-bottom: 1rem;
  text-shadow: 0 2px 10px rgba(233, 69, 96, 0.3);
}

.guitar-description {
  color: rgba(255,255,255,0.8);
  margin-bottom: 2rem;
  line-height: 1.6;
  font-size: 1rem;
}

/* Ë∞ÉÈü≥Âô®Ê†∑Âºè */
.tuner-container {
  background: rgba(0, 0, 0, 0.8);
  border-radius: 15px;
  padding: 20px;
  margin-top: 20px;
  display: none;
}

.tuner-display {
  text-align: center;
  margin-bottom: 20px;
}

.tuner-note {
  font-size: 4rem;
  font-weight: bold;
  color: #e94560;
  margin-bottom: 10px;
}

.tuner-frequency {
  font-size: 1.2rem;
  color: #ffffff;
  margin-bottom: 20px;
}

.tuner-meter {
  width: 100%;
  height: 60px;
  background: #333;
  border-radius: 10px;
  position: relative;
  overflow: hidden;
  margin-bottom: 20px;
}

.tuner-indicator {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 4px;
  height: 80%;
  background: #e94560;
  transform: translate(-50%, -50%);
  transition: left 0.1s ease;
  border-radius: 2px;
}

.tuner-scale {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 20px;
  color: #ffffff;
  font-size: 0.8rem;
}

.tuner-controls {
  display: flex;
  justify-content: center;
  gap: 15px;
}

.tuner-btn {
  background: #e94560;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 1rem;
  transition: all 0.3s ease;
}

.tuner-btn:hover {
  background: #d63384;
  transform: translateY(-2px);
}

/* ÂíåÂº¶ËÆ≠ÁªÉÂô®Ê†∑Âºè */
.chord-trainer {
  background: rgba(0, 0, 0, 0.8);
  border-radius: 15px;
  padding: 20px;
  margin-top: 20px;
  display: none;
}

.chord-fretboard {
  width: 100%;
  height: 200px;
  background: linear-gradient(45deg, #8B4513, #A0522D);
  border-radius: 10px;
  position: relative;
  margin-bottom: 20px;
  border: 3px solid #654321;
}

.chord-info {
  text-align: center;
  margin-bottom: 20px;
}

.chord-name {
  font-size: 2rem;
  font-weight: bold;
  color: #e94560;
  margin-bottom: 10px;
}

.chord-progress {
  width: 100%;
  height: 20px;
  background: #333;
  border-radius: 10px;
  overflow: hidden;
  margin-bottom: 20px;
}

.chord-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #e94560, #ff6b9d);
  transition: width 0.3s ease;
  width: 0%;
}

/* ËäÇÂ•èËÆ≠ÁªÉÂô®Ê†∑Âºè */
.rhythm-trainer {
  background: rgba(0, 0, 0, 0.8);
  border-radius: 15px;
  padding: 20px;
  margin-top: 20px;
  display: none;
}

.metronome {
  text-align: center;
  margin-bottom: 20px;
}

.bpm-display {
  font-size: 3rem;
  font-weight: bold;
  color: #e94560;
  margin-bottom: 20px;
}

.bpm-controls {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 20px;
  margin-bottom: 20px;
}

.bpm-btn {
  background: #e94560;
  color: white;
  border: none;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 1.5rem;
  transition: all 0.3s ease;
}

.bpm-btn:hover {
  background: #d63384;
  transform: scale(1.1);
}

.bpm-slider {
  width: 200px;
  height: 8px;
  background: #333;
  border-radius: 4px;
  outline: none;
  -webkit-appearance: none;
}

.bpm-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 20px;
  height: 20px;
  background: #e94560;
  border-radius: 50%;
  cursor: pointer;
}

/* ÁªÉ‰π†ËÆ°ÂàíÊ†∑Âºè */
.practice-plan {
  background: rgba(0, 0, 0, 0.8);
  border-radius: 15px;
  padding: 20px;
  margin-top: 20px;
  display: none;
}

.plan-header {
  text-align: center;
  margin-bottom: 20px;
}

.plan-title {
  font-size: 1.5rem;
  font-weight: bold;
  color: #e94560;
  margin-bottom: 10px;
}

.plan-list {
  list-style: none;
  padding: 0;
}

.plan-item {
  background: rgba(233, 69, 96, 0.1);
  border: 1px solid rgba(233, 69, 96, 0.3);
  border-radius: 8px;
  padding: 15px;
  margin-bottom: 10px;
  transition: all 0.3s ease;
}

.plan-item:hover {
  background: rgba(233, 69, 96, 0.2);
  transform: translateX(5px);
}

.plan-day {
  font-weight: bold;
  color: #e94560;
  margin-bottom: 5px;
}

.plan-content {
  color: #ffffff;
  font-size: 0.9rem;
}

/* Á§æÂå∫ÊåëÊàòÊ†∑Âºè */
.community-challenge {
  background: rgba(0, 0, 0, 0.8);
  border-radius: 15px;
  padding: 20px;
  margin-top: 20px;
  display: none;
}

.challenge-header {
  text-align: center;
  margin-bottom: 20px;
}

.challenge-title {
  font-size: 1.5rem;
  font-weight: bold;
  color: #e94560;
  margin-bottom: 10px;
}

.challenge-song {
  background: rgba(233, 69, 96, 0.1);
  border: 1px solid rgba(233, 69, 96, 0.3);
  border-radius: 8px;
  padding: 15px;
  margin-bottom: 15px;
}

.song-title {
  font-weight: bold;
  color: #ffffff;
  margin-bottom: 5px;
}

.song-difficulty {
  color: #e94560;
  font-size: 0.9rem;
  margin-bottom: 10px;
}

.song-progress {
  width: 100%;
  height: 10px;
  background: #333;
  border-radius: 5px;
  overflow: hidden;
}

.song-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #e94560, #ff6b9d);
  transition: width 0.3s ease;
  width: 0%;
}

/* ÂìçÂ∫îÂºèËÆæËÆ° */
@media (max-width: 768px) {
  .guitar-tools-grid {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }
  
  .guitar-title {
    font-size: 2.5rem;
  }
  
  .guitar-card {
    padding: 20px;
  }
}

/* Âêâ‰ªñÊâìÂç°Êó•ÂéÜÊ†∑Âºè */
.checkin-calendar-card {
  cursor: default !important;
}

.checkin-calendar-container {
  padding: 20px;
}

.calendar-nav {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 20px;
  gap: 10px;
}

.nav-btn {
  background: linear-gradient(135deg, #e94560 0%, #d63384 100%);
  border: none;
  color: white;
  padding: 8px 12px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: bold;
  transition: all 0.3s ease;
}

.nav-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(233, 69, 96, 0.4);
}

.today-btn {
  background: #e94560;
  color: white;
}

.current-month {
  font-size: 1.2rem;
  font-weight: bold;
  color: #e94560;
  text-align: center;
  flex: 1;
}

.streak-info {
  display: flex;
  justify-content: space-around;
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(233, 69, 96, 0.1);
  border-radius: 10px;
  border: 1px solid rgba(233, 69, 96, 0.3);
}

.streak-item {
  display: flex;
  align-items: center;
  gap: 8px;
  color: #e94560;
  font-weight: bold;
}

.streak-item i {
  font-size: 1.2rem;
  animation: flame 1.5s ease-in-out infinite alternate;
}

@keyframes flame {
  0% { transform: scale(1); }
  100% { transform: scale(1.1); }
}

.calendar-grid {
  margin-bottom: 20px;
}

.calendar-header {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 2px;
  margin-bottom: 10px;
}

.calendar-header > div {
  text-align: center;
  font-weight: bold;
  color: #e94560;
  padding: 10px;
  font-size: 0.9rem;
}

.calendar-body {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 2px;
}

.calendar-day {
  aspect-ratio: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(233, 69, 96, 0.2);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: bold;
  position: relative;
  overflow: hidden;
}

.calendar-day:hover {
  background: rgba(233, 69, 96, 0.2);
  transform: scale(1.05);
  z-index: 2;
}

.calendar-day.other-month {
  opacity: 0.3;
  background: rgba(255, 255, 255, 0.02);
}

.calendar-day.today {
  background: linear-gradient(135deg, #e94560 0%, #d63384 100%);
  color: white;
  border-color: #e94560;
  box-shadow: 0 0 15px rgba(233, 69, 96, 0.5);
}

.calendar-day.completed {
  background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
  color: white;
  border-color: #28a745;
}

.calendar-day.completed::after {
  content: 'üé∏';
  position: absolute;
  top: 2px;
  right: 2px;
  font-size: 0.8rem;
}

.calendar-day.rest {
  background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
  color: white;
  border-color: #6c757d;
}

.calendar-day.rest::after {
  content: 'üò¥';
  position: absolute;
  top: 2px;
  right: 2px;
  font-size: 0.8rem;
}

.monthly-stats {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 15px;
  margin-top: 20px;
}

.stat-item {
  text-align: center;
  padding: 15px;
  background: rgba(233, 69, 96, 0.1);
  border-radius: 10px;
  border: 1px solid rgba(233, 69, 96, 0.3);
}

.stat-value {
  font-size: 1.5rem;
  font-weight: bold;
  color: #e94560;
  margin-bottom: 5px;
}

.stat-label {
  font-size: 0.9rem;
  color: rgba(255, 255, 255, 0.7);
}

/* Âêâ‰ªñÊâìÂç°Ê®°ÊÄÅÊ°ÜÊ†∑Âºè */
.checkin-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  backdrop-filter: blur(5px);
}

.checkin-modal-content {
  background: linear-gradient(135deg, rgba(26,26,46,0.95) 0%, rgba(22,33,62,0.95) 100%);
  border: 2px solid rgba(233, 69, 96, 0.3);
  border-radius: 16px;
  padding: 30px;
  max-width: 500px;
  width: 90%;
  max-height: 80vh;
  overflow-y: auto;
  color: white;
}

.checkin-modal-content h3 {
  color: #e94560;
  margin-bottom: 20px;
  text-align: center;
  font-size: 1.5rem;
}

.form-group {
  margin-bottom: 20px;
}

.form-group label {
  display: block;
  margin-bottom: 8px;
  color: rgba(255, 255, 255, 0.7);
  font-weight: bold;
}

.form-group input,
.form-group select,
.form-group textarea {
  width: 100%;
  padding: 12px;
  border: 1px solid rgba(233, 69, 96, 0.3);
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.1);
  color: white;
  font-size: 14px;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
  outline: none;
  border-color: #e94560;
  box-shadow: 0 0 10px rgba(233, 69, 96, 0.3);
}

.form-group input::placeholder,
.form-group textarea::placeholder {
  color: rgba(255, 255, 255, 0.5);
}

.checkin-detail {
  background: rgba(255, 255, 255, 0.05);
  padding: 20px;
  border-radius: 10px;
  margin-bottom: 20px;
}

.checkin-detail p {
  margin-bottom: 10px;
  line-height: 1.6;
}

.checkin-detail strong {
  color: #e94560;
}

.form-actions {
  display: flex;
  gap: 10px;
  justify-content: flex-end;
  margin-top: 20px;
}

.btn-cancel,
.btn-submit,
.btn-edit,
.btn-delete {
  padding: 10px 20px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: bold;
  transition: all 0.3s ease;
}

.btn-cancel {
  background: rgba(255, 255, 255, 0.1);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.3);
}

.btn-submit,
.btn-edit {
  background: linear-gradient(135deg, #e94560 0%, #d63384 100%);
  color: white;
}

.btn-delete {
  background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
  color: white;
}

.btn-cancel:hover,
.btn-submit:hover,
.btn-edit:hover,
.btn-delete:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

/* ËäÇÊãçÂô®Ê†∑Âºè */
.metronome {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 20px;
  border: 1px solid rgba(233, 69, 96, 0.2);
}

.metronome-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.metronome-header h4 {
  color: #e94560;
  margin: 0;
  font-size: 1.1rem;
}

.metronome-status {
  font-size: 0.9rem;
  font-weight: bold;
  color: #f44336;
}

.bpm-section {
  text-align: center;
  margin-bottom: 20px;
}

.bpm-display {
  font-size: 3rem;
  font-weight: bold;
  color: #e94560;
  text-shadow: 0 0 10px rgba(233, 69, 96, 0.3);
  margin-bottom: 5px;
}

.bpm-label {
  font-size: 0.9rem;
  color: rgba(255, 255, 255, 0.7);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.bpm-controls {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 15px;
}

.bpm-btn {
  background: rgba(233, 69, 96, 0.2);
  color: white;
  border: 1px solid rgba(233, 69, 96, 0.3);
  border-radius: 6px;
  padding: 8px 12px;
  cursor: pointer;
  font-weight: bold;
  transition: all 0.3s ease;
  min-width: 40px;
}

.bpm-btn:hover {
  background: rgba(233, 69, 96, 0.4);
  transform: translateY(-2px);
}

.bpm-slider {
  flex: 1;
  height: 6px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
  outline: none;
  -webkit-appearance: none;
}

.bpm-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  background: #e94560;
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 0 10px rgba(233, 69, 96, 0.5);
}

.bpm-slider::-moz-range-thumb {
  width: 20px;
  height: 20px;
  background: #e94560;
  border-radius: 50%;
  cursor: pointer;
  border: none;
  box-shadow: 0 0 10px rgba(233, 69, 96, 0.5);
}

.bpm-presets {
  display: flex;
  gap: 8px;
  margin-bottom: 15px;
  flex-wrap: wrap;
}

.preset-btn {
  background: rgba(255, 255, 255, 0.1);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 6px;
  padding: 6px 12px;
  cursor: pointer;
  font-size: 0.8rem;
  transition: all 0.3s ease;
}

.preset-btn:hover {
  background: rgba(233, 69, 96, 0.3);
  border-color: #e94560;
}

.metronome-controls {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
  flex-wrap: wrap;
}

.tuner-btn.primary {
  background: linear-gradient(135deg, #e94560 0%, #d63384 100%);
  border-color: #e94560;
}

.time-signature {
  display: flex;
  align-items: center;
  gap: 10px;
  justify-content: center;
}

.time-signature label {
  color: rgba(255, 255, 255, 0.7);
  font-size: 0.9rem;
}

.time-signature select {
  background: rgba(255, 255, 255, 0.1);
  color: white;
  border: 1px solid rgba(233, 69, 96, 0.3);
  border-radius: 6px;
  padding: 6px 12px;
  font-size: 0.9rem;
}

.time-signature select:focus {
  outline: none;
  border-color: #e94560;
  box-shadow: 0 0 10px rgba(233, 69, 96, 0.3);
}

/* ÂìçÂ∫îÂºèËÆæËÆ° */
@media (max-width: 768px) {
  .calendar-nav {
    flex-wrap: wrap;
    gap: 5px;
  }
  
  .nav-btn {
    padding: 6px 10px;
    font-size: 0.9rem;
  }
  
  .current-month {
    font-size: 1rem;
    order: -1;
    width: 100%;
    margin-bottom: 10px;
  }
  
  .streak-info {
    flex-direction: column;
    gap: 10px;
  }
  
  .monthly-stats {
    grid-template-columns: 1fr;
  }
  
  .checkin-modal-content {
    padding: 20px;
    margin: 20px;
  }
  
  .form-actions {
    flex-direction: column;
  }
  
  .bpm-controls {
    flex-direction: column;
    gap: 8px;
  }
  
  .bpm-presets {
    justify-content: center;
  }
  
  .metronome-controls {
    flex-direction: column;
  }
  
  .time-signature {
    flex-direction: column;
    gap: 5px;
  }
}
</style>
{% endblock %}

{% block content %}
<div class="guitar-training-container" id="guitarContainer">
  
  <!-- ÊµÆÂä®Èü≥Á¨¶ËÉåÊôØ -->
  <div class="floating-notes">
    <div class="note" style="top: 10%; left: 10%; animation-delay: 0s;">üé∏</div>
    <div class="note" style="top: 20%; left: 80%; animation-delay: 1s;">üéµ</div>
    <div class="note" style="top: 60%; left: 20%; animation-delay: 2s;">üé∂</div>
    <div class="note" style="top: 80%; left: 70%; animation-delay: 3s;">üéº</div>
    <div class="note" style="top: 30%; left: 60%; animation-delay: 4s;">üéπ</div>
    <div class="note" style="top: 70%; left: 90%; animation-delay: 5s;">üé§</div>
  </div>

  <div class="guitar-header">
    <h1 class="guitar-title">
      <i class="fas fa-guitar">üé∏</i>
      <span>‰∏çÊëáÂ∞±Êªö</span>
    </h1>
    <p class="guitar-subtitle">üéµ Âêâ‰ªñËÆ≠ÁªÉÁ≥ªÁªü - ‰ªéÂàùÂ≠¶ËÄÖÂà∞ËøõÈò∂ËÄÖ</p>
  </div>

  <div class="guitar-tools-grid">
    <!-- Êô∫ËÉΩË∞ÉÈü≥Âô® -->
    <div class="guitar-card" onclick="toggleTuner()">
      <div class="guitar-icon">
        <i class="fas fa-tune">üéöÔ∏è</i>
      </div>
      <h3 class="guitar-title-text">Êô∫ËÉΩË∞ÉÈü≥Âô®</h3>
      <p class="guitar-description">ÂÆûÊó∂Èü≥È¢ëÂàÜÊûêÔºåÁ≤æÂáÜË∞ÉÈü≥ÔºåÊîØÊåÅÂ§öÁßçË∞ÉÂº¶Ê®°Âºè</p>
      
      <div class="tuner-container" id="tunerContainer">
        <div class="tuner-display">
          <div class="tuner-note" id="tunerNote">A</div>
          <div class="tuner-frequency" id="tunerFrequency">440 Hz</div>
        </div>
        <div class="tuner-meter">
          <div class="tuner-indicator" id="tunerIndicator"></div>
          <div class="tuner-scale">
            <span>-50</span>
            <span>-25</span>
            <span>0</span>
            <span>+25</span>
            <span>+50</span>
          </div>
        </div>
        <div class="tuner-controls">
          <button class="tuner-btn" onclick="startTuner()">ÂºÄÂßãË∞ÉÈü≥</button>
          <button class="tuner-btn" onclick="stopTuner()">ÂÅúÊ≠¢</button>
          <select class="tuner-btn" id="tuningMode" onchange="changeTuningMode()">
            <option value="standard">Ê†áÂáÜË∞ÉÂº¶</option>
            <option value="dropd">ÈôçDË∞ÉÂº¶</option>
            <option value="open">ÂºÄÊîæË∞ÉÂº¶</option>
          </select>
        </div>
      </div>
    </div>

    <!-- ÂíåÂº¶ËÆ≠ÁªÉÂô® -->
    <div class="guitar-card" onclick="toggleChordTrainer()">
      <div class="guitar-icon">
        <i class="fas fa-hand-paper">ü§ò</i>
      </div>
      <h3 class="guitar-title-text">ÂíåÂº¶ËÆ≠ÁªÉÂô®</h3>
      <p class="guitar-description">3DÊåáÊùøÊºîÁ§∫ÔºåAIËØÜÂà´Ê≠£Á°ÆÁéáÔºåÂíåÂº¶ËΩ¨Êç¢ËÆ≠ÁªÉ</p>
      
      <div class="chord-trainer" id="chordTrainer">
        <div class="chord-info">
          <div class="chord-name" id="chordName">C</div>
          <div class="chord-progress">
            <div class="chord-progress-fill" id="chordProgress"></div>
          </div>
        </div>
        <div class="chord-fretboard" id="chordFretboard">
          <!-- 3DÊåáÊùøÂ∞ÜÂú®ËøôÈáåÊ∏≤Êüì -->
        </div>
        <div class="tuner-controls">
          <button class="tuner-btn" onclick="startChordTraining()">ÂºÄÂßãËÆ≠ÁªÉ</button>
          <button class="tuner-btn" onclick="nextChord()">‰∏ã‰∏Ä‰∏™ÂíåÂº¶</button>
          <button class="tuner-btn" onclick="showChordHeatmap()">ÁÉ≠ÂäõÂõæ</button>
        </div>
      </div>
    </div>

    <!-- ËäÇÂ•èËÆ≠ÁªÉÂ∑•Âùä -->
    <div class="guitar-card" onclick="toggleRhythmTrainer()">
      <div class="guitar-icon">
        <i class="fas fa-drum">ü•Å</i>
      </div>
      <h3 class="guitar-title-text">ËäÇÂ•èËÆ≠ÁªÉÂ∑•Âùä</h3>
      <p class="guitar-description">ËäÇÊãçÂô®„ÄÅÈºìÊú∫‰º¥Â•è„ÄÅËäÇÂ•èÊ∏∏ÊàèÔºåÊèêÂçáËäÇÂ•èÊÑü</p>
      
      <div class="rhythm-trainer" id="rhythmTrainer">
        <div class="metronome">
          <div class="metronome-header">
            <h4>ËäÇÊãçÂô®ÊéßÂà∂</h4>
            <div class="metronome-status" id="metronomeStatus">Â∑≤ÂÅúÊ≠¢</div>
          </div>
          
          <div class="bpm-section">
            <div class="bpm-display" id="bpmDisplay">120</div>
            <div class="bpm-label">BPM</div>
          </div>
          
          <div class="bpm-controls">
            <button class="bpm-btn" onclick="decreaseBPM()" title="ÂáèÂ∞ë5 BPM">-5</button>
            <button class="bpm-btn" onclick="decreaseBPM(1)" title="ÂáèÂ∞ë1 BPM">-1</button>
            <input type="range" class="bpm-slider" id="bpmSlider" min="40" max="200" value="120" oninput="updateBPM()">
            <button class="bpm-btn" onclick="increaseBPM(1)" title="Â¢ûÂä†1 BPM">+1</button>
            <button class="bpm-btn" onclick="increaseBPM()" title="Â¢ûÂä†5 BPM">+5</button>
          </div>
          
          <div class="bpm-presets">
            <button class="preset-btn" onclick="setBPM(60)">ÊÖ¢ÈÄü</button>
            <button class="preset-btn" onclick="setBPM(80)">‰∏≠ÊÖ¢</button>
            <button class="preset-btn" onclick="setBPM(120)">‰∏≠ÈÄü</button>
            <button class="preset-btn" onclick="setBPM(160)">‰∏≠Âø´</button>
            <button class="preset-btn" onclick="setBPM(180)">Âø´ÈÄü</button>
          </div>
          
          <div class="metronome-controls">
            <button class="tuner-btn primary" onclick="toggleMetronome()" id="metronomeBtn">ÂºÄÂßãËäÇÊãçÂô®</button>
            <button class="tuner-btn" onclick="tapTempo()" id="tapTempoBtn">ÁÇπÂáªËäÇÊãç</button>
            <button class="tuner-btn" onclick="resetMetronome()">ÈáçÁΩÆ</button>
          </div>
          
          <div class="time-signature">
            <label>ÊãçÂè∑Ôºö</label>
            <select id="timeSignature" onchange="updateTimeSignature()">
              <option value="4/4">4/4</option>
              <option value="3/4">3/4</option>
              <option value="6/8">6/8</option>
              <option value="2/4">2/4</option>
            </select>
          </div>
        </div>
        
        <div class="tuner-controls">
          <button class="tuner-btn" onclick="selectDrumStyle('rock')">ÊëáÊªö</button>
          <button class="tuner-btn" onclick="selectDrumStyle('blues')">Â∏ÉÈ≤ÅÊñØ</button>
          <button class="tuner-btn" onclick="selectDrumStyle('jazz')">ÁàµÂ£´</button>
          <button class="tuner-btn" onclick="startRhythmGame()">ËäÇÂ•èÊ∏∏Êàè</button>
        </div>
      </div>
    </div>

    <!-- ÊâìÂç°Êó•ÂéÜ -->
    <div class="guitar-card checkin-calendar-card">
      <div class="guitar-icon">
        <i class="fas fa-calendar-check">üìä</i>
      </div>
      <h3 class="guitar-title-text">ÁªÉ‰π†ÊâìÂç°</h3>
      <p class="guitar-description">ËÆ∞ÂΩïÊØèÊó•ÁªÉ‰π†ÔºåËøΩË∏™ËøõÊ≠•Ôºå‰øùÊåÅÁªÉ‰π†‰π†ÊÉØ</p>
      
      <div class="checkin-calendar-container">
        <!-- Êó•ÂéÜÂØºËà™ -->
        <div class="calendar-nav">
          <button class="nav-btn" id="guitarPrevMonth"><i class="fas fa-chevron-left"></i></button>
          <div class="current-month" id="guitarCurrentMonth">2024Âπ¥1Êúà</div>
          <button class="nav-btn" id="guitarNextMonth"><i class="fas fa-chevron-right"></i></button>
          <button class="nav-btn today-btn" id="guitarGoToday">‰ªäÂ§©</button>
        </div>
        
        <!-- ËøûÁª≠ÊâìÂç°‰ø°ÊÅØ -->
        <div class="streak-info">
          <div class="streak-item">
            <i class="fas fa-fire"></i>
            <span>ËøûÁª≠ <span id="guitarCurrentStreak">0</span> Â§©</span>
          </div>
          <div class="streak-item">
            <i class="fas fa-trophy"></i>
            <span>ÊúÄÈïø <span id="guitarLongestStreak">0</span> Â§©</span>
          </div>
        </div>
        
        <!-- Êó•ÂéÜÁΩëÊ†º -->
        <div class="calendar-grid">
          <div class="calendar-header">
            <div>Êó•</div>
            <div>‰∏Ä</div>
            <div>‰∫å</div>
            <div>‰∏â</div>
            <div>Âõõ</div>
            <div>‰∫î</div>
            <div>ÂÖ≠</div>
          </div>
          <div class="calendar-body" id="guitarCalendarBody">
            <!-- Êó•ÂéÜÊó•ÊúüÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
          </div>
        </div>
        
        <!-- ÊúàÂ∫¶ÁªüËÆ° -->
        <div class="monthly-stats">
          <div class="stat-item">
            <div class="stat-value" id="guitarCompletionRate">0%</div>
            <div class="stat-label">ÂÆåÊàêÁéá</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="guitarTotalDuration">0</div>
            <div class="stat-label">ÊÄªÊó∂Èïø(ÂàÜÈíü)</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="guitarCompletedDays">0</div>
            <div class="stat-label">ÁªÉ‰π†Â§©Êï∞</div>
          </div>
        </div>
      </div>
    </div>

    <!-- ‰∏™ÊÄßÂåñÁªÉ‰π†ËÆ°Âàí -->
    <div class="guitar-card" onclick="togglePracticePlan()">
      <div class="guitar-icon">
        <i class="fas fa-calendar-alt">üìÖ</i>
      </div>
      <h3 class="guitar-title-text">ÁªÉ‰π†ËÆ°Âàí</h3>
      <p class="guitar-description">AIÁîüÊàê‰∏™ÊÄßÂåñÁªÉ‰π†ËÆ°ÂàíÔºåËøΩË∏™ËøõÊ≠•Êõ≤Á∫ø</p>
      
      <div class="practice-plan" id="practicePlan">
        <div class="plan-header">
          <div class="plan-title">‰∏§Âë®ÁªÉ‰π†ËÆ°Âàí</div>
        </div>
        <ul class="plan-list" id="planList">
          <!-- ÁªÉ‰π†ËÆ°ÂàíÂ∞ÜÂú®ËøôÈáåÁîüÊàê -->
        </ul>
        <div class="tuner-controls">
          <button class="tuner-btn" onclick="generatePracticePlan()">ÁîüÊàêËÆ°Âàí</button>
          <button class="tuner-btn" onclick="updateProgress()">Êõ¥Êñ∞ËøõÂ∫¶</button>
          <button class="tuner-btn" onclick="showProgressChart()">ËøõÊ≠•Êõ≤Á∫ø</button>
        </div>
      </div>
    </div>

    <!-- Á§æÂå∫ÊåëÊàò -->
    <div class="guitar-card" onclick="toggleCommunityChallenge()">
      <div class="guitar-icon">
        <i class="fas fa-trophy">üèÜ</i>
      </div>
      <h3 class="guitar-title-text">Á§æÂå∫ÊåëÊàò</h3>
      <p class="guitar-description">ÊØèÂë®ÊåëÊàòÊõ≤ÁõÆÔºåAIËØÑÂàÜÔºåÊéíË°åÊ¶úÁ´û‰∫â</p>
      
      <div class="community-challenge" id="communityChallenge">
        <div class="challenge-header">
          <div class="challenge-title">Êú¨Âë®ÊåëÊàò</div>
        </div>
        <div class="challenge-song">
          <div class="song-title">„ÄäKnockin' on Heaven's Door„Äã- ÂâçÂ•èÈÉ®ÂàÜ</div>
          <div class="song-difficulty">ÈöæÂ∫¶Ôºö‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ</div>
          <div class="song-progress">
            <div class="song-progress-fill" id="songProgress"></div>
          </div>
        </div>
        <div class="tuner-controls">
          <button class="tuner-btn" onclick="startChallenge()">ÂºÄÂßãÊåëÊàò</button>
          <button class="tuner-btn" onclick="uploadVideo()">‰∏ä‰º†ËßÜÈ¢ë</button>
          <button class="tuner-btn" onclick="viewLeaderboard()">ÊéíË°åÊ¶ú</button>
        </div>
      </div>
    </div>

    <!-- ÊûÅÁÆÄÊ®°Âºè -->
    <div class="guitar-card" onclick="enterMinimalMode()">
      <div class="guitar-icon">
        <i class="fas fa-expand">üî≤</i>
      </div>
      <h3 class="guitar-title-text">ÊûÅÁÆÄÊ®°Âºè</h3>
      <p class="guitar-description">‰∏ÄÈîÆËøõÂÖ•ÂÖ®Â±èÁªÉ‰π†Ôºå‰∏ìÊ≥®ÊåáÊùøÂíåËäÇÊãçÂô®</p>
    </div>
  </div>
</div>

<script>
// ÂÖ®Â±ÄÂèòÈáè
let tunerActive = false;
let currentChord = 0;

// ÂíåÂº¶Â∫ì
const chords = ['C', 'G', 'Am', 'F', 'D', 'Em', 'Bm', 'A', 'E', 'Dm'];

// Ë∞ÉÈü≥Âô®ÂäüËÉΩ
function toggleTuner() {
  const container = document.getElementById('tunerContainer');
  container.style.display = container.style.display === 'none' ? 'block' : 'none';
}

function startTuner() {
  if (!tunerActive) {
    tunerActive = true;

    // Ê®°ÊãüË∞ÉÈü≥Âô®Êï∞ÊçÆ
    simulateTuner();
  }
}

function stopTuner() {
  tunerActive = false;

}

function simulateTuner() {
  if (!tunerActive) return;
  
  // Ê®°ÊãüÈü≥È´òÊï∞ÊçÆ
  const notes = ['E', 'A', 'D', 'G', 'B', 'E'];
  const frequencies = [82.41, 110.00, 146.83, 196.00, 246.94, 329.63];
  const randomNote = Math.floor(Math.random() * notes.length);
  const randomOffset = (Math.random() - 0.5) * 100;
  
  document.getElementById('tunerNote').textContent = notes[randomNote];
  document.getElementById('tunerFrequency').textContent = frequencies[randomNote].toFixed(2) + ' Hz';
  
  // Êõ¥Êñ∞ÊåáÁ§∫Âô®‰ΩçÁΩÆ
  const indicator = document.getElementById('tunerIndicator');
  const position = 50 + (randomOffset / 100) * 40; // 50%‰∏∫‰∏≠ÂøÉÔºå¬±20%‰∏∫ËåÉÂõ¥
  indicator.style.left = Math.max(10, Math.min(90, position)) + '%';
  
  setTimeout(simulateTuner, 100);
}

function changeTuningMode() {
  const mode = document.getElementById('tuningMode').value;

}

// ÂíåÂº¶ËÆ≠ÁªÉÂô®ÂäüËÉΩ
function toggleChordTrainer() {
  const container = document.getElementById('chordTrainer');
  container.style.display = container.style.display === 'none' ? 'block' : 'none';
}

function startChordTraining() {

  updateChordDisplay();
}

function nextChord() {
  currentChord = (currentChord + 1) % chords.length;
  updateChordDisplay();
}

function updateChordDisplay() {
  const chordName = document.getElementById('chordName');
  const chordProgress = document.getElementById('chordProgress');
  
  chordName.textContent = chords[currentChord];
  
  // Ê®°ÊãüËøõÂ∫¶
  const progress = Math.random() * 100;
  chordProgress.style.width = progress + '%';
}

function showChordHeatmap() {

  alert('ÁÉ≠ÂäõÂõæÂäüËÉΩÔºöÊòæÁ§∫Áî®Êà∑Â∏∏ÊåâÈîôÁöÑ‰ΩçÁΩÆ\n\nÁ∫¢Ëâ≤Âå∫ÂüüÔºöÁªèÂ∏∏ÊåâÈîô\nÈªÑËâ≤Âå∫ÂüüÔºöÂÅ∂Â∞îÊåâÈîô\nÁªøËâ≤Âå∫ÂüüÔºöÊåâÂØπ');
}

// ËäÇÂ•èËÆ≠ÁªÉÂô®ÂäüËÉΩ
function toggleRhythmTrainer() {
  const container = document.getElementById('rhythmTrainer');
  container.style.display = container.style.display === 'none' ? 'block' : 'none';
}

// ËäÇÊãçÂô®Áõ∏ÂÖ≥ÂèòÈáè
let metronomeActive = false;
let currentBPM = 120;
let metronomeInterval;
let timeSignature = '4/4';
let tapTempoTimes = [];
let beatCount = 0;

function toggleMetronome() {
  if (!metronomeActive) {
    startMetronome();
  } else {
    stopMetronome();
  }
}

function startMetronome() {
  metronomeActive = true;
  document.getElementById('metronomeBtn').textContent = 'ÂÅúÊ≠¢ËäÇÊãçÂô®';
  document.getElementById('metronomeStatus').textContent = 'ËøêË°å‰∏≠';
  document.getElementById('metronomeStatus').style.color = '#4CAF50';

  const interval = 60000 / currentBPM; // ÊØ´Áßí
  beatCount = 0;
  metronomeInterval = setInterval(() => {
    playMetronomeClick();
    beatCount++;
    
    // Ê†πÊçÆÊãçÂè∑ÈáçÁΩÆËäÇÊãçËÆ°Êï∞
    const beatsPerBar = parseInt(timeSignature.split('/')[0]);
    if (beatCount >= beatsPerBar) {
      beatCount = 0;
    }
  }, interval);
}

function stopMetronome() {
  metronomeActive = false;
  document.getElementById('metronomeBtn').textContent = 'ÂºÄÂßãËäÇÊãçÂô®';
  document.getElementById('metronomeStatus').textContent = 'Â∑≤ÂÅúÊ≠¢';
  document.getElementById('metronomeStatus').style.color = '#f44336';
  clearInterval(metronomeInterval);
  beatCount = 0;

}

function playMetronomeClick() {
  // ÂàõÂª∫Èü≥È¢ë‰∏ä‰∏ãÊñáÊí≠ÊîæËäÇÊãçÂ£∞
  const audioContext = new (window.AudioContext || window.webkitAudioContext)();
  const oscillator = audioContext.createOscillator();
  const gainNode = audioContext.createGain();
  
  oscillator.connect(gainNode);
  gainNode.connect(audioContext.destination);
  
  oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
  gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
  gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
  
  oscillator.start(audioContext.currentTime);
  oscillator.stop(audioContext.currentTime + 0.1);
}

function updateBPM() {
  currentBPM = parseInt(document.getElementById('bpmSlider').value);
  document.getElementById('bpmDisplay').textContent = currentBPM;
  
  if (metronomeActive) {
    stopMetronome();
    startMetronome();
  }
}

function increaseBPM(increment = 5) {
  currentBPM = Math.min(200, currentBPM + increment);
  document.getElementById('bpmSlider').value = currentBPM;
  document.getElementById('bpmDisplay').textContent = currentBPM;
  
  if (metronomeActive) {
    stopMetronome();
    startMetronome();
  }
}

function decreaseBPM(decrement = 5) {
  currentBPM = Math.max(40, currentBPM - decrement);
  document.getElementById('bpmSlider').value = currentBPM;
  document.getElementById('bpmDisplay').textContent = currentBPM;
  
  if (metronomeActive) {
    stopMetronome();
    startMetronome();
  }
}

function setBPM(bpm) {
  currentBPM = Math.max(40, Math.min(200, bpm));
  document.getElementById('bpmSlider').value = currentBPM;
  document.getElementById('bpmDisplay').textContent = currentBPM;
  
  if (metronomeActive) {
    stopMetronome();
    startMetronome();
  }

}

function tapTempo() {
  const now = Date.now();
  tapTempoTimes.push(now);
  
  // Âè™‰øùÁïôÊúÄËøë4Ê¨°ÁÇπÂáª
  if (tapTempoTimes.length > 4) {
    tapTempoTimes.shift();
  }
  
  // ËÆ°ÁÆóÂπ≥ÂùáÈó¥Èöî
  if (tapTempoTimes.length >= 2) {
    const intervals = [];
    for (let i = 1; i < tapTempoTimes.length; i++) {
      intervals.push(tapTempoTimes[i] - tapTempoTimes[i-1]);
    }
    
    const avgInterval = intervals.reduce((a, b) => a + b, 0) / intervals.length;
    const calculatedBPM = Math.round(60000 / avgInterval);
    
    // ÈôêÂà∂BPMËåÉÂõ¥
    const newBPM = Math.max(40, Math.min(200, calculatedBPM));
    setBPM(newBPM);

  }
  
  // 3ÁßíÂêéÊ∏ÖÈô§ÁÇπÂáªËÆ∞ÂΩï
  setTimeout(() => {
    tapTempoTimes = [];
  }, 3000);
}

function resetMetronome() {
  stopMetronome();
  setBPM(120);
  timeSignature = '4/4';
  document.getElementById('timeSignature').value = '4/4';
  tapTempoTimes = [];
  beatCount = 0;

}

function updateTimeSignature() {
  timeSignature = document.getElementById('timeSignature').value;

  if (metronomeActive) {
    stopMetronome();
    startMetronome();
  }
}

function selectDrumStyle(style) {

  const styles = {
    'rock': 'ÊëáÊªöÈ£éÊ†ºÔºöÂº∫ÂäõÁöÑ4/4ÊãçÔºåÈÄÇÂêàÁªÉ‰π†Âº∫ÂäõÂíåÂº¶',
    'blues': 'Â∏ÉÈ≤ÅÊñØÈ£éÊ†ºÔºö12Â∞èËäÇÂ∏ÉÈ≤ÅÊñØÔºåÈÄÇÂêàÁªÉ‰π†ËìùË∞ÉÈü≥Èò∂',
    'jazz': 'ÁàµÂ£´È£éÊ†ºÔºöÂ§çÊùÇÁöÑËäÇÂ•èÂûãÔºåÈÄÇÂêàÁªÉ‰π†ÁàµÂ£´ÂíåÂº¶'
  };
  alert(styles[style] || 'Êú™Áü•È£éÊ†º');
}

function startRhythmGame() {

  alert('ËäÇÂ•èÊ∏∏ÊàèÔºö\n\nÈü≥Á¨¶‰ºö‰ªé‰∏äÊñπËêΩ‰∏ã\nÁÇπÂáªÂ±èÂπïÂú®Ê≠£Á°ÆÊó∂Êú∫Âáª‰∏≠Èü≥Á¨¶\nÁªÉ‰π†ËäÇÂ•èÊÑüÂíåÊó∂Êú∫ÊääÊè°');
}

// ÁªÉ‰π†ËÆ°ÂàíÂäüËÉΩ
function togglePracticePlan() {
  const container = document.getElementById('practicePlan');
  container.style.display = container.style.display === 'none' ? 'block' : 'none';
}

function generatePracticePlan() {
  const planList = document.getElementById('planList');
  const plans = [
    { day: 'Á¨¨1-3Â§©', content: 'Em, C, GÂíåÂº¶ËΩ¨Êç¢Ôºà60BPM‚Üí80BPMÔºâ' },
    { day: 'Á¨¨4Â§©', content: 'Âä†ÂÖ•FÂíåÂº¶ & ËäÇÂ•èÂèòÂåñÁªÉ‰π†' },
    { day: 'Á¨¨5-7Â§©', content: '„ÄäKnockin\' on Heaven\'s Door„ÄãÊÆµËêΩÁªÉ‰π†' },
    { day: 'Á¨¨8-10Â§©', content: 'Bm, DmÂíåÂº¶ÁªÉ‰π† & Êâ´Âº¶ÊäÄÂ∑ß' },
    { day: 'Á¨¨11-14Â§©', content: 'ÂÆåÊï¥Ê≠åÊõ≤ÁªÉ‰π† & ÂΩïÈü≥ËØÑ‰º∞' }
  ];
  
  planList.innerHTML = '';
  plans.forEach(plan => {
    const li = document.createElement('li');
    li.className = 'plan-item';
    li.innerHTML = `
      <div class="plan-day">${plan.day}</div>
      <div class="plan-content">${plan.content}</div>
    `;
    planList.appendChild(li);
  });

}

function updateProgress() {

  alert('ËøõÂ∫¶Êõ¥Êñ∞Ôºö\n\n‰ªäÊó•ÁªÉ‰π†Êó∂Èó¥Ôºö45ÂàÜÈíü\nÂíåÂº¶ÂáÜÁ°ÆÁéáÔºö78%\nËäÇÂ•èÂáÜÁ°ÆÁéáÔºö85%\nÂª∫ËÆÆÔºöÂä†Âº∫FÂíåÂº¶ÁªÉ‰π†');
}

function showProgressChart() {

  alert('ËøõÊ≠•Êõ≤Á∫øÂõæÔºö\n\nÊòæÁ§∫ËøáÂéª30Â§©ÁöÑÁªÉ‰π†Êï∞ÊçÆ\nÂåÖÊã¨Ôºö\n- ÁªÉ‰π†Êó∂Èïø\n- ÂíåÂº¶ÂáÜÁ°ÆÁéá\n- ËäÇÂ•èÂáÜÁ°ÆÁéá\n- ËñÑÂº±ÁÇπÈ¢ÑË≠¶');
}

// Á§æÂå∫ÊåëÊàòÂäüËÉΩ
function toggleCommunityChallenge() {
  const container = document.getElementById('communityChallenge');
  container.style.display = container.style.display === 'none' ? 'block' : 'none';
}

function startChallenge() {

  alert('ÊåëÊàòÂºÄÂßãÔºö\n\nÊõ≤ÁõÆÔºö„ÄäKnockin\' on Heaven\'s Door„ÄãÂâçÂ•è\nÊó∂ÈïøÔºö15Áßí\nË¶ÅÊ±ÇÔºöÂáÜÁ°ÆÂºπÂ•èÂíåÂº¶ËøõË°å\nÂΩïÂà∂ËßÜÈ¢ë‰∏ä‰º†ÂèÇ‰∏éËØÑÂàÜ');
}

function uploadVideo() {

  alert('ËßÜÈ¢ë‰∏ä‰º†Ôºö\n\n1. ÂΩïÂà∂15ÁßíÁªÉ‰π†ÁâáÊÆµ\n2. Á°Æ‰øùÈü≥Ë¥®Ê∏ÖÊô∞\n3. AIÂ∞ÜËá™Âä®ËØÑÂàÜÔºö\n   - ËäÇÂ•èÂáÜÁ°ÆÂ∫¶\n   - ÂíåÂº¶Ê∏ÖÊô∞Â∫¶\n   - Êï¥‰ΩìÊµÅÁïÖÂ∫¶');
}

function viewLeaderboard() {

  alert('ÊéíË°åÊ¶úÔºö\n\nüèÜ Á¨¨‰∏ÄÂêçÔºöÂº†‰∏â - 95ÂàÜ\nü•à Á¨¨‰∫åÂêçÔºöÊùéÂõõ - 92ÂàÜ\nü•â Á¨¨‰∏âÂêçÔºöÁéã‰∫î - 89ÂàÜ\n\n‰Ω†ÁöÑÊéíÂêçÔºöÁ¨¨15Âêç - 78ÂàÜ');
}

// ÊûÅÁÆÄÊ®°Âºè
function enterMinimalMode() {

  // ËøõÂÖ•ÂÖ®Â±èÊ®°Âºè
  if (document.documentElement.requestFullscreen) {
    document.documentElement.requestFullscreen();
  }
  
  // ÂàõÂª∫ÊûÅÁÆÄÊ®°ÂºèÁïåÈù¢
  const minimalMode = document.createElement('div');
  minimalMode.id = 'minimalMode';
  minimalMode.innerHTML = `
    <div class="minimal-mode-overlay">
      <div class="minimal-mode-content">
        <div class="minimal-fretboard" id="minimalFretboard">
          <!-- ÊûÅÁÆÄÊåáÊùø -->
          <div class="minimal-fretboard-display">
            <div class="fretboard-strings">
              <div class="string"></div>
              <div class="string"></div>
              <div class="string"></div>
              <div class="string"></div>
              <div class="string"></div>
              <div class="string"></div>
            </div>
            <div class="fretboard-frets">
              <div class="fret"></div>
              <div class="fret"></div>
              <div class="fret"></div>
              <div class="fret"></div>
              <div class="fret"></div>
            </div>
          </div>
        </div>
        <div class="minimal-metronome">
          <div class="bpm-display" id="minimalBPM">120</div>
          <button class="minimal-btn" onclick="toggleMinimalMetronome()">ËäÇÊãçÂô®</button>
        </div>
        <button class="minimal-exit-btn" onclick="exitMinimalMode()">ÈÄÄÂá∫</button>
      </div>
    </div>
  `;
  
  // Ê∑ªÂä†ÊûÅÁÆÄÊ®°ÂºèÊ†∑Âºè
  const style = document.createElement('style');
  style.textContent = `
    .minimal-mode-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: #000;
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .minimal-mode-content {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: white;
    }
    
    .minimal-fretboard {
      width: 80%;
      height: 60%;
      background: #333;
      border: 2px solid #666;
      border-radius: 10px;
      margin-bottom: 20px;
      position: relative;
    }
    
    .minimal-fretboard-display {
      width: 100%;
      height: 100%;
      position: relative;
    }
    
    .fretboard-strings {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
    }
    
    .string {
      flex: 1;
      border-bottom: 1px solid #666;
    }
    
    .fretboard-frets {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
    }
    
    .fret {
      flex: 1;
      border-right: 2px solid #666;
    }
    
    .minimal-metronome {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .bpm-display {
      font-size: 2rem;
      font-weight: bold;
    }
    
    .minimal-btn {
      background: #667eea;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
    }
    
    .minimal-exit-btn {
      background: #f44336;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
    }
  `;
  
  document.head.appendChild(style);
  document.body.appendChild(minimalMode);
}

// ÈÄÄÂá∫ÊûÅÁÆÄÊ®°Âºè
function exitMinimalMode() {
  const minimalMode = document.getElementById('minimalMode');
  if (minimalMode) {
    minimalMode.remove();
  }
  
  if (document.fullscreenElement) {
    document.exitFullscreen();
  }
}

// ÊûÅÁÆÄÊ®°ÂºèËäÇÊãçÂô®
let minimalMetronomeActive = false;
let minimalMetronomeInterval;

function toggleMinimalMetronome() {
  if (minimalMetronomeActive) {
    stopMinimalMetronome();
  } else {
    startMinimalMetronome();
  }
}

function startMinimalMetronome() {
  const bpmDisplay = document.getElementById('minimalBPM');
  const bpm = parseInt(bpmDisplay.textContent);
  const interval = 60000 / bpm;
  
  minimalMetronomeInterval = setInterval(() => {
    playMetronomeClick();
  }, interval);
  
  minimalMetronomeActive = true;
}

function stopMinimalMetronome() {
  if (minimalMetronomeInterval) {
    clearInterval(minimalMetronomeInterval);
    minimalMetronomeActive = false;
  }
}

// È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÁöÑÂàùÂßãÂåñ
document.addEventListener('DOMContentLoaded', function() {

  // ÂàùÂßãÂåñÁªÉ‰π†ËÆ°Âàí
  generatePracticePlan();
  
  // ÂàùÂßãÂåñËøõÂ∫¶
  document.getElementById('songProgress').style.width = '65%';
  
  // ÂàùÂßãÂåñÂêâ‰ªñÊâìÂç°Êó•ÂéÜ
  new GuitarCheckInCalendar();
});

// Âêâ‰ªñÊâìÂç°Êó•ÂéÜÂäüËÉΩ
class GuitarCheckInCalendar {
  constructor() {
    this.currentDate = new Date();
    this.currentYear = this.currentDate.getFullYear();
    this.currentMonth = this.currentDate.getMonth();
    this.calendarData = {};
    this.streak = { current: 0, longest: 0 };
    this.monthlyStats = {};
    
    this.init();
  }
  
  async init() {
    await this.loadCalendarData();
    this.renderCalendar();
    this.bindEvents();
    this.updateStats();
  }
  
  async loadCalendarData() {
    try {
      const response = await fetch(`/tools/api/checkin/calendar/?type=guitar&year=${this.currentYear}&month=${this.currentMonth + 1}`);
      const data = await response.json();
      
      if (data.success) {
        this.calendarData = data.calendar_data;
        this.streak = data.streak;
        this.monthlyStats = data.monthly_stats;
      }
    } catch (error) {
      console.error('Âä†ËΩΩÂêâ‰ªñÊó•ÂéÜÊï∞ÊçÆÂ§±Ë¥•:', error);
    }
  }
  
  renderCalendar() {
    const firstDay = new Date(this.currentYear, this.currentMonth, 1);
    const lastDay = new Date(this.currentYear, this.currentMonth + 1, 0);
    const startDate = new Date(firstDay);
    startDate.setDate(startDate.getDate() - firstDay.getDay());
    
    const calendarBody = document.getElementById('guitarCalendarBody');
    calendarBody.innerHTML = '';
    
    // Êõ¥Êñ∞Êúà‰ªΩÊòæÁ§∫
    document.getElementById('guitarCurrentMonth').textContent = 
      `${this.currentYear}Âπ¥${this.currentMonth + 1}Êúà`;
    
    // Êõ¥Êñ∞ËøûÁª≠ÊâìÂç°‰ø°ÊÅØ
    document.getElementById('guitarCurrentStreak').textContent = this.streak.current;
    document.getElementById('guitarLongestStreak').textContent = this.streak.longest;
    
    // ÁîüÊàêÊó•ÂéÜÁΩëÊ†º
    for (let i = 0; i < 42; i++) {
      const date = new Date(startDate);
      date.setDate(startDate.getDate() + i);
      
      const dayElement = document.createElement('div');
      dayElement.className = 'calendar-day';
      
      const dateStr = date.toISOString().split('T')[0];
      const isCurrentMonth = date.getMonth() === this.currentMonth;
      const isToday = date.toDateString() === new Date().toDateString();
      const checkinData = this.calendarData[dateStr];
      
      if (!isCurrentMonth) {
        dayElement.classList.add('other-month');
      }
      
      if (isToday) {
        dayElement.classList.add('today');
      }
      
      if (checkinData) {
        dayElement.classList.add('has-checkin');
        if (checkinData.status === 'completed') {
          dayElement.classList.add('completed');
        } else if (checkinData.status === 'rest') {
          dayElement.classList.add('rest');
        }
      }
      
      dayElement.textContent = date.getDate();
      dayElement.setAttribute('data-date', dateStr);
      
      dayElement.addEventListener('click', () => this.handleDayClick(dateStr, checkinData));
      
      calendarBody.appendChild(dayElement);
    }
  }
  
  async handleDayClick(dateStr, checkinData) {
    const clickedDate = new Date(dateStr);
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    // Ê£ÄÊü•ÊòØÂê¶‰∏∫Êú™Êù•Êó•Êúü
    if (clickedDate > today) {
      this.showNotification('‰∏çËÉΩ‰∏∫Êú™Êù•Êó•ÊúüÊâìÂç°', 'error');
      return;
    }
    
    if (checkinData) {
      // ÊòæÁ§∫ÊâìÂç°ËØ¶ÊÉÖ
      this.showCheckinDetail(dateStr, checkinData);
    } else {
      // Ê£ÄÊü•ÊòØÂê¶‰∏∫ËøáÂéªÁöÑÊó•Êúü
      if (clickedDate < today) {
        // ÊòæÁ§∫‰∫åÊ¨°Á°ÆËÆ§ÂØπËØùÊ°Ü
        this.showPastDateConfirmation(dateStr);
      } else {
        // ‰ªäÂ§©ÁöÑÊó•ÊúüÔºåÁõ¥Êé•ÊòæÁ§∫ÊâìÂç°Ë°®Âçï
        this.showCheckinForm(dateStr);
      }
    }
  }

  showPastDateConfirmation(dateStr) {
    const confirmation = `
      <div class="checkin-modal">
        <div class="checkin-modal-content">
          <h3>Á°ÆËÆ§Ë°•ÊâìÂç°</h3>
          <div class="confirmation-message">
            <i class="fas fa-exclamation-triangle" style="color: #ff6b35; font-size: 2rem; margin-bottom: 15px;"></i>
            <p>ÊÇ®Ê≠£Âú®‰∏∫ <strong>${dateStr}</strong> Ë°•ÊâìÂç°ÔºåËøôÊòØ‰∏Ä‰∏™ËøáÂéªÁöÑÊó•Êúü„ÄÇ</p>
            <p>ËØ∑Á°ÆËÆ§ÊÇ®Á°ÆÂÆûÂú®Ëøô‰∏ÄÂ§©ËøõË°å‰∫ÜÂêâ‰ªñÁªÉ‰π†„ÄÇ</p>
          </div>
          <div class="form-actions">
            <button class="btn-cancel">ÂèñÊ∂à</button>
            <button class="btn-confirm">Á°ÆËÆ§Ë°•ÊâìÂç°</button>
          </div>
        </div>
      </div>
    `;
    
    document.body.insertAdjacentHTML('beforeend', confirmation);
    
    const modal = document.querySelector('.checkin-modal');
    
    modal.querySelector('.btn-cancel').addEventListener('click', () => {
      modal.remove();
    });
    
    modal.querySelector('.btn-confirm').addEventListener('click', () => {
      modal.remove();
      this.showCheckinForm(dateStr);
    });
    
    modal.addEventListener('click', (e) => {
      if (e.target === modal) {
        modal.remove();
      }
    });
  }

  showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `notification notification-${type}`;
    notification.innerHTML = `
      <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
      <span>${message}</span>
    `;
    
    Object.assign(notification.style, {
      position: 'fixed',
      top: '20px',
      right: '20px',
      padding: '12px 20px',
      borderRadius: '6px',
      color: 'white',
      fontSize: '14px',
      fontWeight: '500',
      zIndex: '10000',
      display: 'flex',
      alignItems: 'center',
      gap: '8px',
      minWidth: '250px',
      boxShadow: '0 4px 12px rgba(0,0,0,0.15)',
      backgroundColor: type === 'success' ? '#4CAF50' : type === 'error' ? '#f44336' : '#2196F3',
      animation: 'slideInRight 0.3s ease-out'
    });
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
      notification.style.animation = 'slideOutRight 0.3s ease-in';
      setTimeout(() => {
        if (notification.parentNode) {
          notification.parentNode.removeChild(notification);
        }
      }, 300);
    }, 3000);
  }
  
  showCheckinForm(dateStr) {
    const form = `
      <div class="checkin-modal">
        <div class="checkin-modal-content">
          <h3>Ê∑ªÂä†Âêâ‰ªñÁªÉ‰π†ÊâìÂç° - ${dateStr}</h3>
          <form id="guitarCheckinForm">
            <div class="form-group">
              <label>ÁªÉ‰π†Á±ªÂûã</label>
              <select name="practice_type" required>
                <option value="chords">ÂíåÂº¶ÁªÉ‰π†</option>
                <option value="scales">Èü≥Èò∂ÁªÉ‰π†</option>
                <option value="songs">Ê≠åÊõ≤ÁªÉ‰π†</option>
                <option value="theory">‰πêÁêÜÂ≠¶‰π†</option>
                <option value="ear_training">Âê¨ÂäõËÆ≠ÁªÉ</option>
                <option value="other">ÂÖ∂‰ªñ</option>
              </select>
            </div>
            <div class="form-group">
              <label>ÁªÉ‰π†Êó∂ÈïøÔºàÂàÜÈíüÔºâ</label>
              <input type="number" name="duration" min="1" max="300" required>
            </div>
            <div class="form-group">
              <label>ÁªÉ‰π†Âº∫Â∫¶</label>
              <select name="intensity" required>
                <option value="low">‰Ωé</option>
                <option value="medium">‰∏≠</option>
                <option value="high">È´ò</option>
              </select>
            </div>
            <div class="form-group">
              <label>ÁªÉ‰π†Êõ≤ÁõÆ</label>
              <input type="text" name="song_name" placeholder="Â¶ÇÔºöKnockin' on Heaven's Door">
            </div>
            <div class="form-group">
              <label>ÁªÉ‰π†Á¨îËÆ∞</label>
              <textarea name="notes" rows="3" placeholder="ËÆ∞ÂΩï‰ªäÂ§©ÁöÑÁªÉ‰π†ÂøÉÂæó..."></textarea>
            </div>
            <div class="form-actions">
              <button type="button" class="btn-cancel">ÂèñÊ∂à</button>
              <button type="submit" class="btn-submit">‰øùÂ≠ò</button>
            </div>
          </form>
        </div>
      </div>
    `;
    
    document.body.insertAdjacentHTML('beforeend', form);
    
    const modal = document.querySelector('.checkin-modal');
    const formElement = document.getElementById('guitarCheckinForm');
    
    formElement.addEventListener('submit', (e) => {
      e.preventDefault();
      this.submitCheckin(dateStr, formElement);
    });
    
    modal.querySelector('.btn-cancel').addEventListener('click', () => {
      modal.remove();
    });
    
    modal.addEventListener('click', (e) => {
      if (e.target === modal) {
        modal.remove();
      }
    });
  }
  
  showCheckinDetail(dateStr, checkinData) {
    const detail = `
      <div class="checkin-modal">
        <div class="checkin-modal-content">
          <h3>Âêâ‰ªñÁªÉ‰π†ÊâìÂç°ËØ¶ÊÉÖ - ${dateStr}</h3>
          <div class="checkin-detail">
            <p><strong>Áä∂ÊÄÅ:</strong> ${checkinData.status === 'completed' ? 'Â∑≤ÂÆåÊàê' : '‰ºëÊÅØÊó•'}</p>
            ${checkinData.detail ? `
              <p><strong>ÁªÉ‰π†Á±ªÂûã:</strong> ${this.getPracticeTypeName(checkinData.detail.practice_type)}</p>
              <p><strong>ÁªÉ‰π†Êó∂Èïø:</strong> ${checkinData.detail.duration} ÂàÜÈíü</p>
              <p><strong>ÁªÉ‰π†Âº∫Â∫¶:</strong> ${this.getIntensityName(checkinData.detail.intensity)}</p>
              <p><strong>ÁªÉ‰π†Êõ≤ÁõÆ:</strong> ${checkinData.detail.song_name || 'Êó†'}</p>
              <p><strong>ÁªÉ‰π†Á¨îËÆ∞:</strong> ${checkinData.detail.notes || 'Êó†'}</p>
            ` : ''}
          </div>
          <div class="form-actions">
            <button class="btn-cancel">ÂÖ≥Èó≠</button>
          </div>
        </div>
      </div>
    `;
    
    document.body.insertAdjacentHTML('beforeend', detail);
    
    const modal = document.querySelector('.checkin-modal');
    
    modal.querySelector('.btn-cancel').addEventListener('click', () => {
      modal.remove();
    });
    
    modal.addEventListener('click', (e) => {
      if (e.target === modal) {
        modal.remove();
      }
    });
  }
  
  async submitCheckin(dateStr, form) {
    const formData = new FormData(form);
    const data = {
      type: 'guitar',
      date: dateStr,
      status: 'completed',
      detail: {
        practice_type: formData.get('practice_type'),
        duration: parseInt(formData.get('duration')),
        intensity: formData.get('intensity'),
        song_name: formData.get('song_name'),
        notes: formData.get('notes')
      }
    };
    
    try {
      const response = await fetch('/tools/api/checkin/add/', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
        },
        body: JSON.stringify(data)
      });
      
      const result = await response.json();
      
      if (result.success) {
        await this.loadCalendarData();
        this.renderCalendar();
        this.updateStats();
        document.querySelector('.checkin-modal').remove();
        alert('ÁªÉ‰π†ÊâìÂç°ÊàêÂäüÔºÅüé∏');
      } else {
        alert('ÊâìÂç°Â§±Ë¥•: ' + result.error);
      }
    } catch (error) {
      console.error('Êèê‰∫§Âêâ‰ªñÊâìÂç°Â§±Ë¥•:', error);
      alert('ÊâìÂç°Â§±Ë¥•ÔºåËØ∑ÈáçËØï');
    }
  }
  
  async deleteCheckin(dateStr) {
    try {
      const response = await fetch(`/tools/api/checkin/delete/${this.getCheckinId(dateStr)}/`, {
        method: 'DELETE',
        headers: {
          'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
        }
      });
      
      const result = await response.json();
      
      if (result.success) {
        await this.loadCalendarData();
        this.renderCalendar();
        this.updateStats();
        alert('Âà†Èô§ÊàêÂäü');
      } else {
        alert('Âà†Èô§Â§±Ë¥•: ' + result.error);
      }
    } catch (error) {
      console.error('Âà†Èô§Âêâ‰ªñÊâìÂç°Â§±Ë¥•:', error);
      alert('Âà†Èô§Â§±Ë¥•ÔºåËØ∑ÈáçËØï');
    }
  }
  
  getCheckinId(dateStr) {
    // ËøôÈáåÈúÄË¶ÅÊ†πÊçÆÂÆûÈôÖÊÉÖÂÜµËé∑Âèñcheckin_id
    return 1; // ‰∏¥Êó∂ËøîÂõû
  }
  
  getPracticeTypeName(type) {
    const types = {
      'chords': 'ÂíåÂº¶ÁªÉ‰π†',
      'scales': 'Èü≥Èò∂ÁªÉ‰π†',
      'songs': 'Ê≠åÊõ≤ÁªÉ‰π†',
      'theory': '‰πêÁêÜÂ≠¶‰π†',
      'ear_training': 'Âê¨ÂäõËÆ≠ÁªÉ',
      'other': 'ÂÖ∂‰ªñ'
    };
    return types[type] || type;
  }
  
  getIntensityName(intensity) {
    const intensities = {
      'low': '‰Ωé',
      'medium': '‰∏≠',
      'high': 'È´ò'
    };
    return intensities[intensity] || intensity;
  }
  
  updateStats() {
    document.getElementById('guitarCompletionRate').textContent = 
      `${this.monthlyStats.completion_rate || 0}%`;
    document.getElementById('guitarTotalDuration').textContent = 
      this.monthlyStats.total_duration || 0;
    document.getElementById('guitarCompletedDays').textContent = 
      this.monthlyStats.completed_days || 0;
  }
  
  bindEvents() {
    document.getElementById('guitarPrevMonth').addEventListener('click', () => {
      this.currentMonth--;
      if (this.currentMonth < 0) {
        this.currentMonth = 11;
        this.currentYear--;
      }
      this.loadCalendarData().then(() => this.renderCalendar());
    });
    
    document.getElementById('guitarNextMonth').addEventListener('click', () => {
      this.currentMonth++;
      if (this.currentMonth > 11) {
        this.currentMonth = 0;
        this.currentYear++;
      }
      this.loadCalendarData().then(() => this.renderCalendar());
    });
    
    document.getElementById('guitarGoToday').addEventListener('click', () => {
      this.currentDate = new Date();
      this.currentYear = this.currentDate.getFullYear();
      this.currentMonth = this.currentDate.getMonth();
      this.loadCalendarData().then(() => this.renderCalendar());
    });
  }
}

// Ê∑ªÂä†Âä®ÁîªÂíåÊ†∑Âºè
const style = document.createElement('style');
style.textContent = `
  @keyframes slideInRight {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }
  
  @keyframes slideOutRight {
    from { transform: translateX(0); opacity: 1; }
    to { transform: translateX(100%); opacity: 0; }
  }
  
  /* Á°ÆËÆ§ÂØπËØùÊ°ÜÊ†∑Âºè */
  .confirmation-message {
    text-align: center;
    margin: 20px 0;
    padding: 20px;
    background: #fff3cd;
    border: 1px solid #ffeaa7;
    border-radius: 8px;
  }
  
  .confirmation-message p {
    margin: 10px 0;
    color: #856404;
    line-height: 1.5;
  }
  
  .confirmation-message strong {
    color: #ff6b35;
  }
  
  .btn-confirm {
    background: #ff6b35;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
  }
  
  .btn-confirm:hover {
    background: #e55a2b;
    transform: translateY(-2px);
  }
  
  /* ÈÄöÁü•Ê†∑Âºè */
  .notification {
    animation: slideInRight 0.3s ease-out;
  }
  
  .notification.notification-error {
    background-color: #f44336;
  }
  
  .notification.notification-success {
    background-color: #4CAF50;
  }
  
  .notification.notification-info {
    background-color: #2196F3;
  }
`;
document.head.appendChild(style);

// ‰∏ªÈ¢òÈü≥‰πêÂä†ËΩΩÂáΩÊï∞ÔºàÂ¶ÇÊûúbase.html‰∏≠Ê≤°ÊúâÂÆö‰πâÔºâ
if (typeof loadThemeMusic === 'undefined') {
  async function loadThemeMusic(theme) {
    try {
      const response = await fetch(`/tools/api/music/?mode=work&action=random`);
      const data = await response.json();
      
      if (data.success && data.music_url) {
        // ÂàõÂª∫Èü≥È¢ëÂÖÉÁ¥†
        const audio = document.createElement('audio');
        audio.src = data.music_url;
        audio.loop = true;
        audio.volume = 0.3;
        audio.id = 'themeMusic';
        
        // ÁßªÈô§ÊóßÁöÑÈü≥È¢ëÂÖÉÁ¥†
        const oldAudio = document.getElementById('themeMusic');
        if (oldAudio) {
          oldAudio.remove();
        }
        
        document.body.appendChild(audio);
        
        // Ëá™Âä®Êí≠ÊîæÔºàÈúÄË¶ÅÁî®Êà∑‰∫§‰∫íÔºâ
        audio.play().catch(error => {

        });
      }
    } catch (error) {

    }
  }
}

// Á°Æ‰øùÊâÄÊúâÂáΩÊï∞ÈÉΩÂ∑≤ÂÆö‰πâÂà∞ÂÖ®Â±Ä‰ΩúÁî®Âüü
(function() {
  // Â∞ÜÊâÄÊúâÂáΩÊï∞ÁªëÂÆöÂà∞windowÂØπË±°ÔºåÁ°Æ‰øùÂÖ®Â±ÄÂèØËÆøÈóÆ
  const functions = {
    toggleTuner,
    toggleChordTrainer,
    toggleRhythmTrainer,
    togglePracticePlan,
    toggleCommunityChallenge,
    enterMinimalMode,
    startTuner,
    stopTuner,
    changeTuningMode,
    startChordTraining,
    nextChord,
    showChordHeatmap,
    toggleMetronome,
    startMetronome,
    stopMetronome,
    updateBPM,
    increaseBPM,
    decreaseBPM,
    setBPM,
    tapTempo,
    resetMetronome,
    updateTimeSignature,
    selectDrumStyle,
    startRhythmGame,
    generatePracticePlan,
    updateProgress,
    showProgressChart,
    startChallenge,
    uploadVideo,
    viewLeaderboard,
    exitMinimalMode,
    toggleMinimalMetronome,
    startMinimalMetronome,
    stopMinimalMetronome
  };
  
  // Â∞ÜÂáΩÊï∞ÁªëÂÆöÂà∞windowÂØπË±°
  Object.keys(functions).forEach(functionName => {
    if (typeof functions[functionName] === 'function') {
      window[functionName] = functions[functionName];
    }
  });
})();
</script>
{% endblock %}
