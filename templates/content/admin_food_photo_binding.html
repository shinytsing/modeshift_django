{% extends 'base.html' %}
{% load static %}

{% block title %}食物照片绑定管理 - QAToolBox{% endblock %}

{% block content %}
<style>
/* 现代化管理页面样式 */
.admin-page {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    padding: 20px 0;
}

.admin-header {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    padding: 30px;
    margin-bottom: 30px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.admin-title {
    color: #2c3e50;
    font-weight: 700;
    margin-bottom: 10px;
    font-size: 2.5rem;
}

.admin-subtitle {
    color: #7f8c8d;
    font-size: 1.1rem;
    margin-bottom: 0;
}

.admin-card {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    padding: 30px;
    margin-bottom: 30px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.action-btn {
    background: linear-gradient(135deg, #667eea, #764ba2);
    border: none;
    color: white;
    padding: 12px 24px;
    border-radius: 25px;
    font-weight: 500;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.action-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    color: white;
    text-decoration: none;
}

.quick-link-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.quick-link {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: 15px;
    padding: 25px;
    text-align: center;
    transition: all 0.3s ease;
    border: 1px solid #dee2e6;
    text-decoration: none;
    color: inherit;
    position: relative;
    overflow: hidden;
}

.quick-link::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
    transition: left 0.5s ease;
}

.quick-link:hover::before {
    left: 100%;
}

.quick-link:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    text-decoration: none;
    color: inherit;
}

.quick-link-icon {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    margin: 0 auto 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px;
    color: white;
    background: linear-gradient(135deg, #667eea, #764ba2);
}

.quick-link-title {
    font-size: 1.2rem;
    font-weight: 600;
    color: #2c3e50;
    margin-bottom: 8px;
}

.quick-link-desc {
    color: #7f8c8d;
    font-size: 0.9rem;
}

.info-box {
    background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 20px;
    border-left: 4px solid #2196f3;
}

.info-box h4 {
    color: #1976d2;
    margin-bottom: 10px;
}

.info-box p {
    color: #424242;
    margin-bottom: 0;
}
</style>

<div class="admin-page">
    <div class="container-fluid">
        <!-- 页面头部 -->
        <div class="admin-header">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1 class="admin-title">
                        <i class="fas fa-camera"></i>
                        食物照片绑定管理
                    </h1>
                    <p class="admin-subtitle">
                        管理食物与照片的映射关系，优化用户体验
                    </p>
                </div>
                <div class="col-md-4 text-end">
                    <div class="d-flex justify-content-end gap-2 flex-wrap">
                        <a href="{% url 'content:admin_dashboard' %}" class="btn btn-outline-secondary btn-sm">
                            <i class="fas fa-arrow-left"></i> 返回仪表盘
                        </a>
                        <a href="{% url 'content:admin_feature_management' %}" class="btn btn-outline-primary btn-sm">
                            <i class="fas fa-cogs"></i> 功能管理
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 功能说明 -->
        <div class="admin-card">
            <div class="info-box">
                <h4><i class="fas fa-info-circle"></i> 功能说明</h4>
                <p>食物照片绑定管理允许您：</p>
                <ul>
                    <li>管理食物名称与图片的映射关系</li>
                    <li>批量绑定和解绑食物照片</li>
                    <li>预览和调整图片显示效果</li>
                    <li>优化食物随机器的视觉体验</li>
                </ul>
            </div>
        </div>

        <!-- 快速操作 -->
        <div class="admin-card">
            <h3 class="mb-4">
                <i class="fas fa-bolt text-warning"></i> 快速操作
            </h3>
            <div class="quick-link-grid">
                <a href="/tools/food_photo_binding/" class="quick-link">
                    <div class="quick-link-icon">
                        <i class="fas fa-drag-drop"></i>
                    </div>
                    <div class="quick-link-title">拖拽绑定工具</div>
                    <div class="quick-link-desc">使用拖拽方式快速绑定食物与照片</div>
                </a>
                
                <a href="/tools/local_food_display/" class="quick-link">
                    <div class="quick-link-icon">
                        <i class="fas fa-images"></i>
                    </div>
                    <div class="quick-link-title">本地照片预览</div>
                    <div class="quick-link-desc">查看和管理本地食物照片</div>
                </a>
                
                <a href="#" onclick="openMappingReport()" class="quick-link">
                    <div class="quick-link-icon">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <div class="quick-link-title">映射报告</div>
                    <div class="quick-link-desc">查看食物照片绑定统计报告</div>
                </a>
                
                <a href="#" onclick="optimizeImages()" class="quick-link">
                    <div class="quick-link-icon">
                        <i class="fas fa-magic"></i>
                    </div>
                    <div class="quick-link-title">智能优化</div>
                    <div class="quick-link-desc">AI辅助优化食物照片匹配</div>
                </a>
                
                <a href="/tools/food_randomizer/" class="quick-link">
                    <div class="quick-link-icon">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <div class="quick-link-title">测试效果</div>
                    <div class="quick-link-desc">在食物随机器中测试绑定效果</div>
                </a>
                
                <a href="#" onclick="exportMappings()" class="quick-link">
                    <div class="quick-link-icon">
                        <i class="fas fa-download"></i>
                    </div>
                    <div class="quick-link-title">导出配置</div>
                    <div class="quick-link-desc">导出当前的映射配置文件</div>
                </a>
            </div>
        </div>

        <!-- 操作历史 -->
        <div class="admin-card">
            <h3 class="mb-4">
                <i class="fas fa-history text-info"></i> 最近操作
            </h3>
            <div id="operationHistory">
                <div class="text-center text-muted py-4">
                    <i class="fas fa-clock fa-2x mb-3"></i>
                    <p>暂无操作记录</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 实时通知 -->
<div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 1050;">
    <div id="notificationToast" class="toast" role="alert">
        <div class="toast-header">
            <i class="fas fa-bell text-primary"></i>
            <strong class="me-auto ms-2">系统通知</strong>
            <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
        </div>
        <div class="toast-body" id="notificationMessage">
        </div>
    </div>
</div>

<script>
// 打开映射报告
function openMappingReport() {
    showNotification('正在生成映射报告...', 'info');
    // 这里可以添加实际的报告生成逻辑
    setTimeout(() => {
        showNotification('映射报告生成完成！', 'success');
    }, 2000);
}

// 智能优化
function optimizeImages() {
    showNotification('正在启动AI优化...', 'info');
    // 这里可以添加实际的AI优化逻辑
    setTimeout(() => {
        showNotification('AI优化建议已生成！', 'success');
    }, 3000);
}

// 导出映射配置
function exportMappings() {
    showNotification('正在导出映射配置...', 'info');
    // 这里可以添加实际的导出逻辑
    setTimeout(() => {
        showNotification('映射配置导出完成！', 'success');
    }, 1500);
}

// 显示通知
function showNotification(message, type = 'info') {
    const toast = document.getElementById('notificationToast');
    const messageElement = document.getElementById('notificationMessage');
    
    messageElement.textContent = message;
    
    // 设置通知类型样式
    toast.className = `toast ${type === 'success' ? 'bg-success text-white' : type === 'error' ? 'bg-danger text-white' : 'bg-info text-white'}`;
    
    // 显示通知
    const bsToast = new bootstrap.Toast(toast);
    bsToast.show();
}

// 页面加载完成后初始化
document.addEventListener('DOMContentLoaded', function() {
    showNotification('食物照片绑定管理页面已加载', 'success');
});
</script>
{% endblock %}
