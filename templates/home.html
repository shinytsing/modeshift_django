{% extends "base.html" %}
{% block content %}
<div class="home-container">
  <!-- 动态背景 -->
  <div class="home-background">
    <div class="matrix-rain"></div>
    <div class="geometric-shapes">
      <div class="shape shape-1"></div>
      <div class="shape shape-2"></div>
      <div class="shape shape-3"></div>
      <div class="shape shape-4"></div>
      <div class="shape shape-5"></div>
    </div>
  </div>

  <!-- 主要内容 -->
  <div class="home-content">
    <div class="theme-card">
              <div class="theme-title">
          <div class="modeshift-logo" id="modeshiftLogo">
            <div class="gear-container">
              <div class="gear gear-1" data-theme="work">
                <div class="emotion-wave"></div>
                <div class="emotion-wave"></div>
                <div class="emotion-wave"></div>
                <div class="thought-bubble"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="gear-inner">
                  <i class="fas fa-laptop-code"></i>
                  <div class="gear-teeth" title="工作模式 - 高效办公，专注开发，提升生产力"></div>
                </div>
              </div>
              <div class="gear gear-2" data-theme="life">
                <div class="emotion-wave"></div>
                <div class="emotion-wave"></div>
                <div class="emotion-wave"></div>
                <div class="thought-bubble"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="gear-inner">
                  <i class="fas fa-heart"></i>
                  <div class="gear-teeth" title="生活模式 - 记录美好时光，分享生活点滴"></div>
                </div>
              </div>
              <div class="gear gear-3" data-theme="training">
                <div class="emotion-wave"></div>
                <div class="emotion-wave"></div>
                <div class="emotion-wave"></div>
                <div class="thought-bubble"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="gear-inner">
                  <i class="fas fa-fire"></i>
                  <div class="gear-teeth" title="训练模式 - 提升技能，挑战自我，持续成长"></div>
                </div>
              </div>
              <div class="gear gear-4" data-theme="emo">
                <div class="emotion-wave"></div>
                <div class="emotion-wave"></div>
                <div class="emotion-wave"></div>
                <div class="thought-bubble"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="gear-inner">
                  <i class="fas fa-music"></i>
                  <div class="gear-teeth" title="情感模式 - 音乐陪伴，情感表达，心灵治愈"></div>
                </div>
              </div>
            </div>
            <div class="logo-text">
              <span class="title-glitch" data-text="ModeShift" id="titleClickable">ModeShift</span>
            </div>
          </div>
      </div>
      
      <div class="theme-subtitle-text">
        <div class="quote-container">
          <div class="quote-subtitle">Four Modes, One Beast</div>
        </div>
      </div>
      
      <div class="action-buttons">
        <a href="#" class="btn theme-auth-btn" id="enterToolsBtn" onclick="enterCurrentModeTools(event)">
          <span class="btn-text">进入外世界</span>
          <span class="btn-icon">→</span>
        </a>
        
        <div class="theme-preview">
          <div class="theme-dots">
            <div class="theme-dot active" data-theme="work"></div>
            <div class="theme-dot" data-theme="life"></div>
            <div class="theme-dot" data-theme="training"></div>
            <div class="theme-dot" data-theme="emo"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 浮动元素 -->
  <div class="floating-elements">
    <div class="floating-icon" style="--delay: 0s">⚡</div>
    <div class="floating-icon" style="--delay: 2s">💻</div>
    <div class="floating-icon" style="--delay: 4s">🔧</div>
    <div class="floating-icon" style="--delay: 6s">🚀</div>
  </div>
</div>

<style>
/* 首页容器 */
.home-container {
  min-height: 100vh;
  position: relative;
  overflow: hidden;
  background: var(--geek-bg, #0a0e17);
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  /* 性能优化 */
  will-change: auto;
  transform: translateZ(0);
}

/* 动态背景 */
.home-background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
}

/* 矩阵雨效果 */
.matrix-rain {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(180deg, 
    transparent 0%, 
    rgba(0, 255, 231, 0.1) 50%, 
    transparent 100%);
  animation: matrixRain 20s linear infinite;
}

/* 里世界背景效果 */
.home-container::after {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: 
    radial-gradient(circle at 20% 80%, rgba(255, 0, 110, 0.05) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(0, 255, 255, 0.05) 0%, transparent 50%),
    radial-gradient(circle at 40% 40%, rgba(255, 215, 0, 0.03) 0%, transparent 50%);
  z-index: -1;
  animation: underworldPulse 15s ease-in-out infinite;
  opacity: 0.3;
}

@keyframes underworldPulse {
  0%, 100% { 
    transform: scale(1) rotate(0deg);
    opacity: 0.3;
  }
  50% { 
    transform: scale(1.1) rotate(1deg);
    opacity: 0.5;
  }
}

@keyframes matrixRain {
  0% { transform: translateY(-100%); }
  100% { transform: translateY(100%); }
}

/* 几何形状 */
.geometric-shapes {
  position: absolute;
  width: 100%;
  height: 100%;
}

.shape {
  position: absolute;
  border: 2px solid rgba(0, 255, 231, 0.3);
  animation: float 6s ease-in-out infinite;
}

.shape-1 {
  top: 20%;
  left: 10%;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  animation-delay: 0s;
}

.shape-2 {
  top: 60%;
  right: 15%;
  width: 40px;
  height: 40px;
  transform: rotate(45deg);
  animation-delay: 1s;
}

.shape-3 {
  bottom: 30%;
  left: 20%;
  width: 80px;
  height: 40px;
  border-radius: 20px;
  animation-delay: 2s;
}

.shape-4 {
  top: 40%;
  left: 60%;
  width: 50px;
  height: 50px;
  transform: rotate(45deg);
  animation-delay: 3s;
}

.shape-5 {
  bottom: 20%;
  right: 30%;
  width: 70px;
  height: 70px;
  border-radius: 50%;
  animation-delay: 4s;
}

@keyframes float {
  0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.3; }
  50% { transform: translateY(-15px) rotate(90deg); opacity: 0.6; }
}

/* 主要内容 */
.home-content {
  position: relative;
  z-index: 10;
  text-align: center;
  padding: 40px;
  width: 100%;
}

/* 主题卡片 */
.theme-card {
  background: rgba(10, 14, 23, 0.9);
  border: 2px solid var(--geek-primary, #00ffe7);
  border-radius: 20px;
  box-shadow: 
    0 0 30px rgba(0, 255, 231, 0.3),
    inset 0 0 30px rgba(0, 255, 231, 0.1);
  backdrop-filter: blur(20px);
  transition: all 0.3s ease;
  padding: 40px;
  position: relative;
  overflow: hidden;
  width: 100%;
  max-width: 100%;
  margin: 0;
  /* 性能优化 */
  transform: translateZ(0);
  backface-visibility: hidden;
  will-change: transform;
}

.theme-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(0, 255, 231, 0.15), transparent);
  transition: left 0.5s ease;
}

.theme-card:hover::before {
  left: 100%;
}

.theme-card:hover {
  transform: translateY(-5px) scale(1.01);
  box-shadow: 
    0 15px 40px rgba(0, 255, 231, 0.3),
    inset 0 0 30px rgba(0, 255, 231, 0.1);
  border-color: #00ffe7;
  will-change: transform;
}

/* ModeShift Logo样式 */
.modeshift-logo {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2rem;
  position: relative;
}

.gear-container {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 4rem;
  position: relative;
  width: auto;
  height: auto;
  background: transparent;
  border-radius: 0;
  padding: 3rem;
  border: none;
  box-shadow: none;
  will-change: transform;
  transform: translateZ(0);
  backdrop-filter: none;
  overflow: visible;
}

.gear-container::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    rgba(0, 255, 231, 0.05) 90deg,
    transparent 180deg,
    transparent 270deg,
    rgba(0, 255, 231, 0.05) 360deg
  );
  animation: containerRotate 10s linear infinite;
  opacity: 0.5;
}

.gear-container::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
  animation: containerGlow 4s ease-in-out infinite alternate;
}

/* 移除复杂的伪元素动画 */

/* 移除复杂的容器动画 */

        .gear {
          width: 100px;
          height: 100px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 2.5rem;
          color: #ffffff;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          border: none;
          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
          transition: all 0.3s ease;
          cursor: pointer;
          position: relative;
          will-change: transform;
          transform: translateZ(0);
          overflow: hidden;
          z-index: 100;
        }

        /* 点击效果 */
        .gear:active {
          transform: scale(0.95);
          box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

.gear::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
  opacity: 0;
  transition: opacity 0.3s ease;
}

.gear-inner {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  z-index: 2;
}

.gear-inner i {
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  transition: all 0.3s ease;
}

.gear:hover {
  transform: scale(1.1);
  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
}

.gear:hover::before {
  opacity: 1;
}

.gear:hover .gear-inner i {
  transform: scale(1.1);
}

        /* 动画关键帧 */
        @keyframes gearFloat {
          0%, 100% { transform: translateY(0px); }
          50% { transform: translateY(-10px); }
        }

        @keyframes gearRotate {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        @keyframes gearPulse {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.05); }
        }

        @keyframes gearBounce {
          0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
          40% { transform: translateY(-15px); }
          60% { transform: translateY(-7px); }
        }

        @keyframes gearShake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
          20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        @keyframes gearGlow {
          0%, 100% { box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2); }
          50% { box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2), 0 0 20px rgba(255, 255, 255, 0.3); }
        }

        @keyframes iconSpin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        @keyframes iconBounce {
          0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
          40% { transform: translateY(-8px); }
          60% { transform: translateY(-4px); }
        }

        @keyframes iconPulse {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.1); }
        }

        @keyframes iconShake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-3px); }
          20%, 40%, 60%, 80% { transform: translateX(3px); }
        }

        /* 不同齿轮的颜色主题和动画 */
        .gear.gear-1 {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          animation: gearFloat 3s ease-in-out infinite, gearGlow 2s ease-in-out infinite;
        }

        .gear.gear-1 .gear-inner i {
          animation: iconSpin 4s linear infinite;
        }

        .gear.gear-2 {
          background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
          animation: gearPulse 2.5s ease-in-out infinite, gearGlow 2s ease-in-out infinite 0.5s;
        }

        .gear.gear-2 .gear-inner i {
          animation: iconBounce 2s ease-in-out infinite;
        }

        .gear.gear-3 {
          background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
          animation: gearBounce 3s ease-in-out infinite, gearGlow 2s ease-in-out infinite 1s;
        }

        .gear.gear-3 .gear-inner i {
          animation: iconPulse 1.5s ease-in-out infinite;
        }

        .gear.gear-4 {
          background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
          animation: gearShake 2s ease-in-out infinite, gearGlow 2s ease-in-out infinite 1.5s;
        }

        .gear.gear-4 .gear-inner i {
          animation: iconShake 1.8s ease-in-out infinite;
        }

        /* 悬停时暂停动画 */
        .gear:hover {
          animation-play-state: paused;
        }

        .gear:hover .gear-inner i {
          animation-play-state: paused;
        }

.gear-teeth {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  background: radial-gradient(circle at center, 
    rgba(0, 255, 231, 0.2) 0%, 
    rgba(0, 255, 231, 0.1) 30%, 
    transparent 70%);
  animation: gearPulse 3s ease-in-out infinite;
  z-index: 1;
  opacity: 0.8;
}

@keyframes gearRotate {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.gear:hover {
  transform: scale(1.1) rotate(5deg);
  box-shadow: 
    0 12px 40px rgba(0, 0, 0, 0.4),
    inset 0 2px 0 rgba(255, 255, 255, 0.6),
    inset 0 -2px 0 rgba(0, 0, 0, 0.2);
  filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.2)) brightness(1.1) contrast(1.05);
  animation: gearHover 0.6s ease-in-out;
}

.gear.gear-1:hover {
  box-shadow: 
    0 25px 60px rgba(0, 0, 0, 0.7),
    inset 0 5px 20px rgba(255, 255, 255, 0.5),
    0 0 50px rgba(0, 255, 255, 0.8),
    0 0 80px rgba(0, 191, 255, 0.6);
}

.gear.gear-2:hover {
  box-shadow: 
    0 25px 60px rgba(0, 0, 0, 0.7),
    inset 0 5px 20px rgba(255, 255, 255, 0.5),
    0 0 50px rgba(0, 255, 0, 0.8),
    0 0 80px rgba(50, 205, 50, 0.6);
}

.gear.gear-3:hover {
  box-shadow: 
    0 25px 60px rgba(0, 0, 0, 0.7),
    inset 0 5px 20px rgba(255, 255, 255, 0.5),
    0 0 50px rgba(255, 0, 0, 0.8),
    0 0 80px rgba(255, 68, 68, 0.6);
}

.gear.gear-4:hover {
  box-shadow: 
    0 25px 60px rgba(0, 0, 0, 0.7),
    inset 0 5px 20px rgba(255, 255, 255, 0.5),
    0 0 50px rgba(255, 0, 255, 0.8),
    0 0 80px rgba(255, 64, 255, 0.6);
}

.gear:hover::before {
  animation-duration: 1.5s;
  opacity: 0.8;
}

.gear:hover::after {
  animation-duration: 1s;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.6) 0%, transparent 70%);
}

.gear:hover .gear-teeth {
  animation-duration: 1.5s;
  background: radial-gradient(circle at center, 
    rgba(0, 255, 231, 0.4) 0%, 
    rgba(0, 255, 231, 0.2) 30%, 
    transparent 70%);
  opacity: 1;
  transform: scale(1.1);
}

.gear.gear-1 {
  animation-delay: 0s;
  background: linear-gradient(135deg, rgba(0, 255, 231, 0.15) 0%, rgba(0, 191, 255, 0.1) 50%, rgba(0, 128, 255, 0.05) 100%);
  border: 2px solid rgba(0, 255, 255, 0.4);
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.4),
    inset 0 -1px 0 rgba(0, 0, 0, 0.1),
    0 0 20px rgba(0, 255, 255, 0.3);
  animation: gearFloat 4s ease-in-out infinite, heartbeat 2s ease-in-out infinite, gearDance 6s ease-in-out infinite !important;
}

.gear-1::before {
  animation-delay: 0s;
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    rgba(0, 255, 231, 0.2) 45deg,
    rgba(0, 255, 231, 0.5) 90deg,
    rgba(0, 255, 231, 0.2) 135deg,
    transparent 180deg,
    transparent 225deg,
    rgba(0, 255, 231, 0.2) 270deg,
    rgba(0, 255, 231, 0.5) 315deg,
    rgba(0, 255, 231, 0.2) 360deg
  );
}

.gear-1 .emotion-wave {
  border-color: rgba(0, 255, 231, 0.4);
}

.gear-1 .thought-bubble {
  background: rgba(0, 255, 231, 0.8);
}

.gear.gear-2 {
  animation-delay: 0.5s;
  background: linear-gradient(135deg, rgba(0, 255, 0, 0.15) 0%, rgba(50, 205, 50, 0.1) 50%, rgba(34, 139, 34, 0.05) 100%);
  border: 2px solid rgba(0, 255, 0, 0.4);
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.4),
    inset 0 -1px 0 rgba(0, 0, 0, 0.1),
    0 0 20px rgba(0, 255, 0, 0.3);
  animation: gearFloat 4s ease-in-out infinite 0.5s, calm 3s ease-in-out infinite, gearWiggle 5s ease-in-out infinite !important;
}

.gear-2::before {
  animation-delay: 0.5s;
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    rgba(40, 167, 69, 0.2) 45deg,
    rgba(40, 167, 69, 0.5) 90deg,
    rgba(40, 167, 69, 0.2) 135deg,
    transparent 180deg,
    transparent 225deg,
    rgba(40, 167, 69, 0.2) 270deg,
    rgba(40, 167, 69, 0.5) 315deg,
    rgba(40, 167, 69, 0.2) 360deg
  );
}

.gear-2 .emotion-wave {
  border-color: rgba(40, 167, 69, 0.4);
}

.gear-2 .thought-bubble {
  background: rgba(40, 167, 69, 0.8);
}

.gear.gear-3 {
  animation-delay: 1s;
  background: linear-gradient(135deg, rgba(255, 0, 0, 0.15) 0%, rgba(255, 68, 68, 0.1) 50%, rgba(204, 0, 0, 0.05) 100%);
  border: 2px solid rgba(255, 0, 0, 0.4);
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.4),
    inset 0 -1px 0 rgba(0, 0, 0, 0.1),
    0 0 20px rgba(255, 0, 0, 0.3);
  animation: gearFloat 4s ease-in-out infinite 1s, excited 1.5s ease-in-out infinite, gearRock 3s ease-in-out infinite !important;
}

.gear-3::before {
  animation-delay: 1s;
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    rgba(255, 68, 68, 0.2) 45deg,
    rgba(255, 68, 68, 0.5) 90deg,
    rgba(255, 68, 68, 0.2) 135deg,
    transparent 180deg,
    transparent 225deg,
    rgba(255, 68, 68, 0.2) 270deg,
    rgba(255, 68, 68, 0.5) 315deg,
    rgba(255, 68, 68, 0.2) 360deg
  );
}

.gear-3 .emotion-wave {
  border-color: rgba(255, 68, 68, 0.4);
}

.gear-3 .thought-bubble {
  background: rgba(255, 68, 68, 0.8);
}

.gear.gear-4 {
  animation-delay: 1.5s;
  background: linear-gradient(135deg, rgba(255, 0, 255, 0.15) 0%, rgba(255, 64, 255, 0.1) 50%, rgba(204, 0, 204, 0.05) 100%);
  border: 2px solid rgba(255, 0, 255, 0.4);
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.4),
    inset 0 -1px 0 rgba(0, 0, 0, 0.1),
    0 0 20px rgba(255, 0, 255, 0.3);
  animation: gearFloat 4s ease-in-out infinite 1.5s, nervous 2.5s ease-in-out infinite, gearDance 7s ease-in-out infinite !important;
}

.gear-4::before {
  animation-delay: 1.5s;
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    rgba(255, 0, 110, 0.2) 45deg,
    rgba(255, 0, 110, 0.5) 90deg,
    rgba(255, 0, 110, 0.2) 135deg,
    transparent 180deg,
    transparent 225deg,
    rgba(255, 0, 110, 0.2) 270deg,
    rgba(255, 0, 110, 0.5) 315deg,
    rgba(255, 0, 110, 0.2) 360deg
  );
}

.gear-4 .emotion-wave {
  border-color: rgba(255, 0, 110, 0.4);
}

.gear-4 .thought-bubble {
  background: rgba(255, 0, 110, 0.8);
}

@keyframes gearFloat {
  0%, 100% { 
    transform: translateY(0px) rotate(0deg) scale(1); 
  }
  50% { 
    transform: translateY(-6px) rotate(5deg) scale(1.02); 
  }
}

@keyframes gearInterlock {
  0% { transform: rotate(0deg) scale(1); }
  100% { transform: rotate(360deg) scale(1.1); }
}

@keyframes gearPulse {
  0%, 100% { 
    opacity: 0.8;
    transform: scale(1);
  }
  50% { 
    opacity: 1;
    transform: scale(1.05);
  }
}

@keyframes gearInterlock {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.gear.active {
  transform: scale(1.2);
  box-shadow: 
    0 15px 40px rgba(0, 255, 231, 0.6),
    inset 0 4px 15px rgba(255, 255, 255, 0.25);
  border-color: #00ffe7;
  animation: gearActive 2s ease-in-out infinite;
  background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.4) 0%, rgba(255, 255, 255, 0.2) 40%, rgba(0, 255, 231, 0.25) 100%);
}

.gear.active + .gear {
  animation: gearInterlock 2s linear infinite;
}

.gear-container:hover .gear {
  animation-play-state: running;
}

.gear-container:not(:hover) .gear {
  animation-play-state: paused;
}

/* 齿轮联动效果 */
.gear:hover {
  z-index: 10;
}

.gear:hover + .gear {
  z-index: 9;
  transform: scale(1.05);
}

.gear:hover + .gear + .gear {
  z-index: 8;
  transform: scale(1.03);
}

.gear:hover + .gear + .gear + .gear {
  z-index: 7;
  transform: scale(1.01);
}

/* 里世界效果 */
.gear:hover .gear-inner {
  background: radial-gradient(circle at 40% 40%, rgba(255, 255, 255, 0.4) 0%, rgba(255, 255, 255, 0.2) 30%, transparent 70%);
  box-shadow: inset 0 4px 12px rgba(255, 255, 255, 0.2);
}

.gear:hover .gear-teeth {
  animation-duration: 1s;
  opacity: 1;
}

@keyframes gearActive {
  0%, 100% { transform: scale(1.2) rotate(0deg); }
  50% { transform: scale(1.25) rotate(3deg); }
}

@keyframes gearShine {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes gearGlow {
  0% { 
    opacity: 0.3;
    transform: translate(-50%, -50%) scale(0.8);
  }
  100% { 
    opacity: 0.8;
    transform: translate(-50%, -50%) scale(1.2);
  }
}

@keyframes gearHover {
  0% { transform: scale(1) rotate(0deg); }
  25% { transform: scale(1.2) rotate(-2deg); }
  50% { transform: scale(1.15) rotate(3deg); }
  75% { transform: scale(1.18) rotate(-1deg); }
  100% { transform: scale(1.15) rotate(5deg); }
}

@keyframes iconFloat {
  0%, 100% { transform: translateY(0px) scale(1); }
  50% { transform: translateY(-2px) scale(1.05); }
}

@keyframes iconGlow {
  0% { 
    opacity: 0.3;
    transform: translate(-50%, -50%) scale(0.8);
  }
  100% { 
    opacity: 0.6;
    transform: translate(-50%, -50%) scale(1.1);
  }
}

@keyframes containerRotate {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes containerGlow {
  0% { opacity: 0.3; }
  100% { opacity: 0.8; }
}

/* 内心戏动画 */
@keyframes emotionWave {
  0% {
    transform: translate(-50%, -50%) scale(0.8);
    opacity: 0;
  }
  50% {
    transform: translate(-50%, -50%) scale(1.2);
    opacity: 0.6;
  }
  100% {
    transform: translate(-50%, -50%) scale(1.6);
    opacity: 0;
  }
}

@keyframes thoughtBubble {
  0% {
    transform: scale(0) translateY(0);
    opacity: 0;
  }
  25% {
    transform: scale(1) translateY(-5px);
    opacity: 0.8;
  }
  75% {
    transform: scale(1.1) translateY(-10px);
    opacity: 0.6;
  }
  100% {
    transform: scale(0) translateY(-15px);
    opacity: 0;
  }
}

@keyframes heartbeat {
  0%, 100% {
    transform: scale(1);
  }
  25% {
    transform: scale(1.05);
  }
  50% {
    transform: scale(1.1);
  }
  75% {
    transform: scale(1.05);
  }
}

@keyframes nervous {
  0%, 100% {
    transform: translateX(0) rotate(0deg);
  }
  25% {
    transform: translateX(-2px) rotate(-1deg);
  }
  75% {
    transform: translateX(2px) rotate(1deg);
  }
}

@keyframes excited {
  0%, 100% {
    transform: scale(1) rotate(0deg);
  }
  25% {
    transform: scale(1.1) rotate(5deg);
  }
  50% {
    transform: scale(1.05) rotate(-3deg);
  }
  75% {
    transform: scale(1.15) rotate(8deg);
  }
}

@keyframes calm {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.02);
    opacity: 0.8;
  }
}

/* 图标动态动画 */
@keyframes iconSpin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes iconBounce {
  0%, 100% { transform: translateY(0) scale(1); }
  25% { transform: translateY(-3px) scale(1.1); }
  50% { transform: translateY(-6px) scale(1.05); }
  75% { transform: translateY(-3px) scale(1.1); }
}

@keyframes iconShake {
  0%, 100% { transform: translateX(0) rotate(0deg); }
  25% { transform: translateX(-2px) rotate(-5deg); }
  50% { transform: translateX(2px) rotate(5deg); }
  75% { transform: translateX(-1px) rotate(-3deg); }
}

@keyframes iconPulse {
  0%, 100% { transform: scale(1); }
  25% { transform: scale(1.2); }
  50% { transform: scale(0.9); }
  75% { transform: scale(1.1); }
}

/* 让gear整体动起来 */
@keyframes gearDance {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  25% { transform: translateY(-5px) rotate(2deg); }
  50% { transform: translateY(-10px) rotate(-2deg); }
  75% { transform: translateY(-5px) rotate(1deg); }
}

@keyframes gearWiggle {
  0%, 100% { transform: translateX(0) rotate(0deg); }
  25% { transform: translateX(-3px) rotate(-3deg); }
  50% { transform: translateX(3px) rotate(3deg); }
  75% { transform: translateX(-1px) rotate(-1deg); }
}

@keyframes gearRock {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(-5deg); }
  50% { transform: rotate(5deg); }
  75% { transform: rotate(-2deg); }
}

/* 粒子动画 */
@keyframes particleFloat1 {
  0%, 100% { 
    transform: translateY(0) translateX(0) scale(1);
    opacity: 0.3;
  }
  25% { 
    transform: translateY(-10px) translateX(5px) scale(1.2);
    opacity: 0.8;
  }
  50% { 
    transform: translateY(-20px) translateX(-3px) scale(0.8);
    opacity: 0.5;
  }
  75% { 
    transform: translateY(-15px) translateX(8px) scale(1.1);
    opacity: 0.7;
  }
}

@keyframes particleFloat2 {
  0%, 100% { 
    transform: translateY(0) translateX(0) scale(1);
    opacity: 0.3;
  }
  33% { 
    transform: translateY(-15px) translateX(-8px) scale(1.3);
    opacity: 0.9;
  }
  66% { 
    transform: translateY(-25px) translateX(5px) scale(0.7);
    opacity: 0.4;
  }
}

@keyframes particleFloat3 {
  0%, 100% { 
    transform: translateY(0) translateX(0) scale(1);
    opacity: 0.3;
  }
  25% { 
    transform: translateY(-8px) translateX(-5px) scale(1.1);
    opacity: 0.7;
  }
  50% { 
    transform: translateY(-18px) translateX(3px) scale(0.9);
    opacity: 0.5;
  }
  75% { 
    transform: translateY(-12px) translateX(-7px) scale(1.2);
    opacity: 0.8;
  }
}

.logo-text {
  margin-top: 1rem;
}

/* 标题样式 */
.theme-title {
  margin-bottom: 2rem;
  position: relative;
}

.title-glitch {
  font-size: 3.5rem;
  font-weight: 900;
  color: var(--geek-primary, #00ffe7);
  text-shadow: 
    0 0 10px #00ffe7,
    0 0 20px #00ffe7,
    0 0 30px rgba(0, 255, 231, 0.8);
  font-family: 'JetBrains Mono', monospace;
  letter-spacing: 4px;
  position: relative;
  display: inline-block;
  animation: glitch 5s infinite, breathe 3s ease-in-out infinite;
  will-change: transform;
  filter: brightness(1) contrast(1.2);
  cursor: pointer;
  transition: all 0.3s ease;
}

.title-glitch:hover {
  transform: scale(1.05);
  filter: brightness(1.1) contrast(1.3);
  text-shadow: 
    0 0 15px #00ffe7,
    0 0 25px #00ffe7,
    0 0 35px rgba(0, 255, 231, 0.9);
}

.title-glitch::before,
.title-glitch::after {
  content: attr(data-text);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.title-glitch::before {
  animation: glitch-1 2s infinite;
  color: #ff00ff;
  z-index: -1;
  text-shadow: 
    0 0 8px #ff00ff,
    0 0 16px #ff00ff;
  filter: brightness(0.8);
}

.title-glitch::after {
  animation: glitch-2 2s infinite;
  color: #00ffff;
  z-index: -2;
  text-shadow: 
    0 0 8px #00ffff,
    0 0 16px #00ffff;
  filter: brightness(0.8);
}

@keyframes glitch {
  0%, 90%, 100% { 
    transform: translate(0); 
    text-shadow: 
      0 0 10px #00ffe7,
      0 0 20px #00ffe7,
      0 0 30px rgba(0, 255, 231, 0.8);
  }
  5% { 
    transform: translate(-2px, 2px); 
    text-shadow: 
      0 0 12px #00ffe7,
      0 0 22px #00ffe7,
      0 0 32px rgba(0, 255, 231, 0.9);
  }
  10% { 
    transform: translate(-2px, -2px); 
    text-shadow: 
      0 0 12px #00ffe7,
      0 0 22px #00ffe7,
      0 0 32px rgba(0, 255, 231, 0.9);
  }
  15% { 
    transform: translate(2px, 2px); 
    text-shadow: 
      0 0 12px #00ffe7,
      0 0 22px #00ffe7,
      0 0 32px rgba(0, 255, 231, 0.9);
  }
  20% { 
    transform: translate(2px, -2px); 
    text-shadow: 
      0 0 12px #00ffe7,
      0 0 22px #00ffe7,
      0 0 32px rgba(0, 255, 231, 0.9);
  }
}

@keyframes glitch-1 {
  0%, 90%, 100% { 
    transform: translate(0); 
    text-shadow: 
      0 0 8px #ff00ff,
      0 0 16px #ff00ff;
  }
  5% { 
    transform: translate(2px, -2px); 
    text-shadow: 
      0 0 10px #ff00ff,
      0 0 18px #ff00ff;
  }
  10% { 
    transform: translate(2px, 2px); 
    text-shadow: 
      0 0 10px #ff00ff,
      0 0 18px #ff00ff;
  }
  15% { 
    transform: translate(-2px, -2px); 
    text-shadow: 
      0 0 10px #ff00ff,
      0 0 18px #ff00ff;
  }
  20% { 
    transform: translate(-2px, 2px); 
    text-shadow: 
      0 0 10px #ff00ff,
      0 0 18px #ff00ff;
  }
}

@keyframes glitch-2 {
  0%, 90%, 100% { 
    transform: translate(0); 
    text-shadow: 
      0 0 8px #00ffff,
      0 0 16px #00ffff;
  }
  5% { 
    transform: translate(-2px, 2px); 
    text-shadow: 
      0 0 10px #00ffff,
      0 0 18px #00ffff;
  }
  10% { 
    transform: translate(2px, -2px); 
    text-shadow: 
      0 0 10px #00ffff,
      0 0 18px #00ffff;
  }
  15% { 
    transform: translate(-2px, -2px); 
    text-shadow: 
      0 0 10px #00ffff,
      0 0 18px #00ffff;
  }
  20% { 
    transform: translate(2px, 2px); 
    text-shadow: 
      0 0 10px #00ffff,
      0 0 18px #00ffff;
  }
}

@keyframes breathe {
  0%, 100% { 
    filter: brightness(1.1) contrast(1.2);
    text-shadow: 
      0 0 10px #00ffe7,
      0 0 20px #00ffe7,
      0 0 30px rgba(0, 255, 231, 0.8);
  }
  50% { 
    filter: brightness(1.2) contrast(1.3);
    text-shadow: 
      0 0 12px #00ffe7,
      0 0 22px #00ffe7,
      0 0 32px rgba(0, 255, 231, 0.9);
  }
}



/* 副标题样式 */
.quote-container {
  position: relative;
  margin: 1.5rem 0;
  padding: 15px;
  text-align: center;
}

.quote-text {
  font-size: 1.8rem;
  font-weight: 700;
  color: var(--geek-primary, #00ffe7);
  text-shadow: 0 0 15px rgba(0, 255, 231, 0.5);
  margin-bottom: 0.5rem;
  font-family: 'JetBrains Mono', monospace;
  letter-spacing: 2px;
  transition: all 0.5s ease;
  animation: quoteGlow 3s ease-in-out infinite;
}

@keyframes quoteGlow {
  0%, 100% { 
    text-shadow: 0 0 15px rgba(0, 255, 231, 0.5);
    transform: scale(1);
  }
  50% { 
    text-shadow: 0 0 25px rgba(0, 255, 231, 0.8);
    transform: scale(1.02);
  }
}

.quote-subtitle {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--geek-accent, #00bfff);
  text-shadow: 0 0 15px rgba(0, 191, 255, 0.6);
  margin: 1rem 0;
  font-family: 'JetBrains Mono', monospace;
  letter-spacing: 2px;
  transition: all 0.5s ease;
  animation: subtitlePulse 4s ease-in-out infinite;
  text-align: center;
}

.quote-footer {
  font-size: 1rem;
  font-weight: 500;
  color: var(--geek-secondary, #ff6b9d);
  text-shadow: 0 0 8px rgba(255, 107, 157, 0.3);
  font-style: italic;
  font-family: 'JetBrains Mono', monospace;
  letter-spacing: 0.5px;
  transition: all 0.5s ease;
  animation: footerFade 5s ease-in-out infinite;
}

@keyframes subtitlePulse {
  0%, 100% { 
    text-shadow: 0 0 10px rgba(0, 191, 255, 0.4);
    opacity: 0.9;
  }
  50% { 
    text-shadow: 0 0 15px rgba(0, 191, 255, 0.6);
    opacity: 1;
  }
}

@keyframes footerFade {
  0%, 100% { 
    text-shadow: 0 0 8px rgba(255, 107, 157, 0.3);
    opacity: 0.7;
  }
  50% { 
    text-shadow: 0 0 12px rgba(255, 107, 157, 0.5);
    opacity: 1;
  }
}
  font-size: 1.4rem;
  color: #ffffff;
  font-weight: 500;
  line-height: 1.6;
  font-family: 'KaiTi', '楷体', serif;
  text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
  position: relative;
  z-index: 2;
  animation: quoteGlow 3s ease-in-out infinite alternate;
}

@keyframes quoteGlow {
  0% { text-shadow: 0 0 10px rgba(255, 255, 255, 0.5); }
  100% { text-shadow: 0 0 20px rgba(0, 255, 231, 0.8), 0 0 30px rgba(0, 255, 231, 0.4); }
}

.quote-decoration {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.quote-mark {
  position: absolute;
  font-size: 3rem;
  color: rgba(0, 255, 231, 0.3);
  font-family: 'KaiTi', '楷体', serif;
}

.quote-mark:first-child {
  top: -10px;
  left: -20px;
  animation: markFloat 4s ease-in-out infinite;
}

.quote-mark:last-child {
  bottom: -20px;
  right: -10px;
  animation: markFloat 4s ease-in-out infinite reverse;
}

@keyframes markFloat {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  50% { transform: translateY(-10px) rotate(10deg); }
}

/* 按钮样式 */
.action-buttons {
  margin-top: 2rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
}

.theme-auth-btn {
  background: linear-gradient(45deg, #00ffe7, #0099ff);
  border: none;
  color: #000;
  padding: 15px 30px;
  border-radius: 50px;
  font-weight: 700;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  transition: all 0.3s ease;
  box-shadow: 
    0 5px 20px rgba(0, 255, 231, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
  font-family: 'JetBrains Mono', monospace;
  font-size: 1.1rem;
  letter-spacing: 1px;
  position: relative;
  overflow: hidden;
}

.theme-auth-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  transition: left 0.5s ease;
}

.theme-auth-btn:hover::before {
  left: 100%;
}

.theme-auth-btn:hover {
  transform: translateY(-3px) scale(1.05);
  box-shadow: 
    0 10px 30px rgba(0, 255, 231, 0.5),
    inset 0 1px 0 rgba(255, 255, 255, 0.5);
  color: #000;
  text-decoration: none;
}

.btn-text {
  position: relative;
  z-index: 2;
}

.btn-icon {
  position: relative;
  z-index: 2;
  font-size: 1.2rem;
  animation: arrowPulse 2s ease-in-out infinite;
}

@keyframes arrowPulse {
  0%, 100% { transform: translateX(0); }
  50% { transform: translateX(5px); }
}

/* 主题预览 */
.theme-preview {
  margin-top: 20px;
}

.theme-dots {
  display: flex;
  gap: 15px;
  justify-content: center;
}

.theme-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
}

.theme-dot[data-theme="work"] {
  background: #00ffe7;
  box-shadow: 0 0 10px #00ffe7;
}

.theme-dot[data-theme="life"] {
  background: #667eea;
  box-shadow: 0 0 10px #667eea;
}

.theme-dot[data-theme="training"] {
  background: #ff6b35;
  box-shadow: 0 0 10px #ff6b35;
}

.theme-dot[data-theme="emo"] {
  background: #764ba2;
  box-shadow: 0 0 10px #764ba2;
}

.theme-dot:hover {
  transform: scale(1.3);
}

.theme-dot.active {
  transform: scale(1.5);
  animation: dotPulse 2s ease-in-out infinite;
}

@keyframes dotPulse {
  0%, 100% { transform: scale(1.5); }
  50% { transform: scale(1.8); }
}

/* 浮动图标 */
.floating-elements {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 5;
}

.floating-icon {
  position: absolute;
  font-size: 2rem;
  color: rgba(0, 255, 231, 0.6);
  animation: floatIcon 8s ease-in-out infinite;
  animation-delay: var(--delay);
}

.floating-icon:nth-child(1) { top: 20%; left: 10%; }
.floating-icon:nth-child(2) { top: 60%; right: 15%; }
.floating-icon:nth-child(3) { bottom: 30%; left: 20%; }
.floating-icon:nth-child(4) { top: 40%; left: 60%; }

@keyframes floatIcon {
  0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0.6; }
  25% { transform: translateY(-15px) rotate(45deg); opacity: 0.8; }
  50% { transform: translateY(-25px) rotate(90deg); opacity: 0.7; }
  75% { transform: translateY(-15px) rotate(135deg); opacity: 0.8; }
}

/* 响应式设计 - 全面优化 */

/* 大屏幕 (1200px+) */
@media (min-width: 1200px) {
  .home-container {
    padding: 40px;
  }
  
  .theme-card {
    max-width: 100%;
    padding: 60px;
  }
  
  .title-glitch {
    font-size: 4.5rem;
    letter-spacing: 6px;
  }
  

  
  .quote-text {
    font-size: 1.8rem;
    line-height: 1.8;
  }
  
  .theme-auth-btn {
    padding: 20px 40px;
    font-size: 1.3rem;
  }
  
  .floating-icon {
    font-size: 3rem;
  }
  
  .shape {
    width: 80px;
    height: 80px;
  }
}

/* 中等屏幕 (768px - 1199px) */
@media (max-width: 1199px) and (min-width: 768px) {
  .home-content {
    padding: 30px;
  }
  
  .theme-card {
    max-width: 100%;
    padding: 40px;
  }
  
  .title-glitch {
    font-size: 3.5rem;
    letter-spacing: 4px;
  }
  

  
  .quote-text {
    font-size: 1.4rem;
    line-height: 1.6;
  }
  
  .theme-auth-btn {
    padding: 15px 30px;
    font-size: 1.1rem;
  }
  
  .floating-icon {
    font-size: 2.5rem;
  }
}

/* 平板端 (768px以下) */
@media (max-width: 767px) {
  .home-container {
    padding: 15px;
  }
  
  .home-content {
    padding: 20px;
  }
  
  .theme-card {
    padding: 30px 20px;
    max-width: 100%;
    margin: 0;
  }
  
  .title-glitch {
    font-size: 2.5rem;
    letter-spacing: 2px;
  }
  

  
  .quote-text {
    font-size: 1.2rem;
    line-height: 1.5;
  }
  
  .quote-container {
    padding: 15px;
  }
  
  .theme-auth-btn {
    padding: 12px 24px;
    font-size: 1rem;
    width: 100%;
    max-width: 280px;
  }
  
  .floating-icon {
    font-size: 1.5rem;
  }
  
  .shape {
    width: 40px;
    height: 40px;
  }
  
  /* 移动端优化3D效果 */
  .theme-card:hover {
    transform: translateY(-5px) scale(1.01);
  }
  
  /* 禁用移动端的3D鼠标效果 */
  .theme-card {
    transform: none !important;
  }
}

/* 手机端 (480px以下) */
@media (max-width: 480px) {
  .home-container {
    padding: 10px;
  }
  
  .home-content {
    padding: 15px;
  }
  
  .theme-card {
    padding: 25px 15px;
    border-radius: 15px;
    max-width: 100%;
  }
  
  .title-glitch {
    font-size: 2rem;
    letter-spacing: 1px;
  }
  

  
  .quote-text {
    font-size: 1.1rem;
    line-height: 1.4;
  }
  
  .quote-container {
    padding: 10px;
    margin: 1.5rem 0;
  }
  
  .quote-mark {
    font-size: 2rem;
  }
  
  .quote-mark:first-child {
    top: -5px;
    left: -10px;
  }
  
  .quote-mark:last-child {
    bottom: -10px;
    right: -5px;
  }
  
  .theme-auth-btn {
    padding: 10px 20px;
    font-size: 0.9rem;
    border-radius: 25px;
  }
  
  .btn-icon {
    font-size: 1rem;
  }
  
  .theme-dots {
    gap: 8px;
  }
  
  .theme-dot {
    width: 8px;
    height: 8px;
  }
  
  .floating-icon {
    font-size: 1.2rem;
  }
  
  .shape {
    width: 30px;
    height: 30px;
  }
  
  /* 小屏幕隐藏部分浮动元素 */
  .floating-icon:nth-child(3),
  .floating-icon:nth-child(4) {
    display: none;
  }
  
  .shape:nth-child(4),
  .shape:nth-child(5) {
    display: none;
  }
}

/* 超小屏幕 (320px以下) */
@media (max-width: 320px) {
  .home-container {
    padding: 5px;
  }
  
  .home-content {
    padding: 10px;
  }
  
  .theme-card {
    padding: 20px 10px;
  }
  
  .title-glitch {
    font-size: 1.8rem;
    letter-spacing: 0.5px;
  }
  

  
  .quote-text {
    font-size: 1rem;
  }
  
  .theme-auth-btn {
    padding: 8px 16px;
    font-size: 0.8rem;
  }
  
  .floating-icon {
    font-size: 1rem;
  }
  
  .shape {
    width: 25px;
    height: 25px;
  }
}

/* 横屏模式优化 */
@media (orientation: landscape) and (max-height: 500px) {
  .home-container {
    padding: 10px;
  }
  
  .home-content {
    padding: 15px;
  }
  
  .theme-card {
    padding: 20px;
    max-width: 100%;
  }
  
  .title-glitch {
    font-size: 2rem;
  }
  

  
  .quote-text {
    font-size: 1rem;
  }
  
  .quote-container {
    margin: 1rem 0;
  }
  
  .action-buttons {
    margin-top: 1rem;
  }
  
  .floating-icon {
    font-size: 1.2rem;
  }
  
  .shape {
    width: 25px;
    height: 25px;
  }
}

/* 高分辨率屏幕优化 */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .theme-card {
    border-width: 1px;
  }
  
  .shape {
    border-width: 1px;
  }
  
  .theme-dot {
    box-shadow: 0 0 5px currentColor;
  }
}

/* 触摸设备优化 */
@media (hover: none) and (pointer: coarse) {
  .theme-card:hover {
    transform: translateY(-3px) scale(1.01);
  }
  
  .theme-dot:hover {
    transform: scale(1.2);
  }
  
  .theme-auth-btn:hover {
    transform: translateY(-2px) scale(1.02);
  }
  
  /* 增加触摸目标大小 */
  .theme-dot {
    width: 16px;
    height: 16px;
    min-width: 44px;
    min-height: 44px;
  }
  
  .theme-auth-btn {
    min-height: 44px;
  }
}

/* 减少动画的设备 */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  .floating-icon,
  .shape,
  .particle {
    animation: none !important;
  }
}

/* 主题特定样式 */
.home-container.work-theme {
  background: var(--geek-bg, #0a0e17);
}

.home-container.life-theme {
  background: linear-gradient(135deg, #1a4d2e 0%, #2d5a3d 100%);
}

.home-container.training-theme {
  background: linear-gradient(135deg, #2d1b1b 0%, #4a2c2c 100%);
}

.home-container.cyberpunk-theme {
  background: #0a0a0a;
}

/* 主题特定的齿轮样式 */
.work-theme .gear-1 {
  background: linear-gradient(135deg, rgba(0, 255, 231, 0.4), rgba(0, 191, 255, 0.4));
  border-color: #00ffe7;
  box-shadow: 0 0 25px rgba(0, 255, 231, 0.5);
}

.life-theme .gear-2 {
  background: linear-gradient(135deg, rgba(40, 167, 69, 0.4), rgba(23, 162, 184, 0.4));
  border-color: #28a745;
  box-shadow: 0 0 25px rgba(40, 167, 69, 0.5);
}

.training-theme .gear-3 {
  background: linear-gradient(135deg, rgba(255, 68, 68, 0.4), rgba(255, 107, 53, 0.4));
  border-color: #ff4444;
  box-shadow: 0 0 25px rgba(255, 68, 68, 0.5);
}

.cyberpunk-theme .gear-4 {
  background: linear-gradient(135deg, rgba(255, 0, 110, 0.4), rgba(0, 255, 255, 0.4));
  border-color: #ff006e;
  box-shadow: 0 0 25px rgba(255, 0, 110, 0.5);
}

/* 移动设备性能优化 */
@media (max-width: 768px) {
  .title-glitch {
    animation: none !important;
  }
  
  .title-glitch::before,
  .title-glitch::after {
    display: none !important;
  }
  
  .floating-icon {
    animation-duration: 8s !important;
  }
  
  .shape {
    animation-duration: 10s !important;
  }
  
  .theme-card {
    transition: all 0.2s ease !important;
  }
  
  .theme-card:hover {
    transform: translateY(-2px) scale(1.005) !important;
  }
  
  .gear-container {
    width: 300px;
    height: 120px;
  }
  
  .gear {
    width: 60px;
    height: 60px;
    font-size: 1.4rem;
  }
}
</style>

<script>
// ModeShift Logo交互功能
document.addEventListener('DOMContentLoaded', function() {
  const gears = document.querySelectorAll('.gear');
  const logo = document.getElementById('modeshiftLogo');
  let currentTheme = 'work';
  
  // 齿轮点击事件 - 跳转到对应页面
  gears.forEach(gear => {
    gear.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      
      const theme = this.getAttribute('data-theme');

      
      // 移除所有齿轮的活跃状态
      gears.forEach(g => g.classList.remove('active'));
      
      // 添加当前齿轮的活跃状态
      this.classList.add('active');
      
      // 更新当前主题
      currentTheme = theme;
      
      // 更新网站整体风格
      updateWebsiteStyle(theme);
      
      // 如果有switchGlobalTheme函数则调用
      if (typeof switchGlobalTheme === 'function') {
        switchGlobalTheme(theme);
      }
      
      // 跳转到对应的工具页面
      // 主题页面映射
      const themePageMapping = {
        'life': '/tools/life/',
        'work': '/tools/work/',
        'training': '/tools/training/',
        'emo': '/tools/emo_mode/'
      };
      
      // 跳转到对应的工具页面
      const targetPage = themePageMapping[theme] || '/tools/work/';

      window.location.href = targetPage;
    });
  });
  
  // 更新网站整体风格
  function updateWebsiteStyle(theme) {
    const root = document.documentElement;
    const homeContainer = document.querySelector('.home-container');
    
    // 移除所有主题类
    homeContainer.classList.remove('work-theme', 'life-theme', 'training-theme', 'cyberpunk-theme');
    
    // 添加当前主题类
    homeContainer.classList.add(theme + '-theme');
    
    // 更新CSS变量
    switch(theme) {
      case 'work':
        root.style.setProperty('--geek-primary', '#00ffe7');
        root.style.setProperty('--geek-accent', '#00bfff');
        root.style.setProperty('--geek-secondary', '#ff6b9d');
        break;
      case 'life':
        root.style.setProperty('--geek-primary', '#28a745');
        root.style.setProperty('--geek-accent', '#17a2b8');
        root.style.setProperty('--geek-secondary', '#ffc107');
        break;
      case 'training':
        root.style.setProperty('--geek-primary', '#ff4444');
        root.style.setProperty('--geek-accent', '#ff6b35');
        root.style.setProperty('--geek-secondary', '#ffd700');
        break;
      case 'cyberpunk':
        root.style.setProperty('--geek-primary', '#ff006e');
        root.style.setProperty('--geek-accent', '#00ffff');
        root.style.setProperty('--geek-secondary', '#ffd700');
        break;
    }
  }
  
  // 鼠标悬停效果
  logo.addEventListener('mouseenter', function() {
    gears.forEach(gear => {
      gear.style.animationPlayState = 'running';
    });
  });
  
  logo.addEventListener('mouseleave', function() {
    gears.forEach(gear => {
      gear.style.animationPlayState = 'paused';
    });
  });
  
  // 简化的齿轮联动效果
  gears.forEach((gear, index) => {
    gear.addEventListener('mouseenter', function() {
      // 激活当前齿轮
      this.style.zIndex = '10';
      this.style.animation = 'gearInterlock 1s ease-in-out infinite';
      
      // 激活相邻齿轮
      gears.forEach((otherGear, otherIndex) => {
        if (otherIndex !== index) {
          const delay = Math.abs(otherIndex - index) * 0.2;
          otherGear.style.zIndex = 10 - Math.abs(otherIndex - index);
          otherGear.style.animation = `gearInterlock 1s ease-in-out infinite ${delay}s`;
        }
      });
    });
    
    gear.addEventListener('mouseleave', function() {
      // 恢复所有齿轮的默认状态
      gears.forEach(g => {
        g.style.zIndex = '1';
        g.style.animation = 'gearFloat 4s ease-in-out infinite';
      });
    });
  });
  
  // 初始化默认主题
  updateWebsiteStyle(currentTheme);
  document.querySelector('.gear-1').classList.add('active');
});

// 主题切换功能
document.querySelectorAll('.theme-dot').forEach(dot => {
  dot.addEventListener('click', function() {
    const theme = this.getAttribute('data-theme');
    
    // 更新活跃状态
    document.querySelectorAll('.theme-dot').forEach(d => d.classList.remove('active'));
    this.classList.add('active');
    
    // 更新body类名以反映当前主题
    document.body.className = '';
    if (theme === 'work') {
      document.body.classList.add('work-theme');
    } else if (theme === 'life') {
      document.body.classList.add('life-theme');
    } else if (theme === 'training') {
      document.body.classList.add('training-theme');
    } else if (theme === 'emo') {
      document.body.classList.add('emo-theme');
    }
    
    // 如果有switchGlobalTheme函数则调用
    if (typeof switchGlobalTheme === 'function') {
      switchGlobalTheme(theme);
    }
  });
});

// 副标题固定显示
const quoteSubtitle = document.querySelector('.quote-subtitle');

// 检测设备类型
function isMobileDevice() {
  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || 
         window.innerWidth <= 768;
}

// 检测触摸设备
function isTouchDevice() {
  return 'ontouchstart' in window || navigator.maxTouchPoints > 0;
}

// 鼠标悬停效果 (仅桌面端) - 优化版本
if (!isMobileDevice() && !isTouchDevice()) {
  const themeCard = document.querySelector('.theme-card');
  let animationFrameId = null;
  
  themeCard.addEventListener('mousemove', function(e) {
    // 使用 requestAnimationFrame 优化性能
    if (animationFrameId) {
      cancelAnimationFrame(animationFrameId);
    }
    
    animationFrameId = requestAnimationFrame(() => {
      const rect = this.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      
      const centerX = rect.width / 2;
      const centerY = rect.height / 2;
      
      const rotateX = (y - centerY) / 15; // 减少旋转角度
      const rotateY = (centerX - x) / 15;
      
      // 使用 will-change 优化
      this.style.willChange = 'transform';
      this.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateY(-5px) scale(1.01)`;
    });
  });

  themeCard.addEventListener('mouseleave', function() {
    if (animationFrameId) {
      cancelAnimationFrame(animationFrameId);
    }
    this.style.willChange = 'auto';
    this.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg) translateY(0px) scale(1)';
  });
}

// 移动端触摸效果
if (isTouchDevice()) {
  const themeCard = document.querySelector('.theme-card');
  
  themeCard.addEventListener('touchstart', function() {
    this.style.transform = 'translateY(-3px) scale(1.01)';
  });
  
  themeCard.addEventListener('touchend', function() {
    this.style.transform = 'translateY(0) scale(1)';
  });
}

// 进入当前模式工具页面
function enterCurrentModeTools(event) {
  event.preventDefault();
  
  // 检查用户是否已登录
  var isAuthenticated = {% if user.is_authenticated %}true{% else %}false{% endif %};
  
  if (isAuthenticated) {
    // 用户已登录，获取当前主题
    let currentTheme = 'work'; // 默认极客模式
    
    // 从body类名中获取当前主题
    const bodyClass = document.body.className;
    if (bodyClass.includes('life-theme')) {
      currentTheme = 'life';
    } else if (bodyClass.includes('training-theme')) {
      currentTheme = 'training';
    } else if (bodyClass.includes('emo-theme')) {
      currentTheme = 'emo';
    }
    
    // 主题页面映射
    const themePageMapping = {
      'life': '/tools/life_mode/',
      'work': '/tools/work_mode/',
      'training': '/tools/training_mode/',
      'emo': '/tools/emo_mode/'
    };
    
    // 跳转到对应的工具页面
    const targetPage = themePageMapping[currentTheme] || '/tools/work_mode/';
    window.location.href = targetPage;
  } else {
    // 用户未登录，跳转到登录页面
    window.location.href = '/users/login/';
  }
}

// 初始化极客主题
document.addEventListener('DOMContentLoaded', function() {
  // 设置默认主题为极客模式
  document.body.className = 'work-theme';
  
  // 激活极客主题点
  document.querySelector('.theme-dot[data-theme="work"]').classList.add('active');
});
</script>
{% endblock %}