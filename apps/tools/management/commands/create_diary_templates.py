from django.core.management.base import BaseCommand

from apps.tools.models.diary_models import DailyQuestion, DiaryTemplate


class Command(BaseCommand):
    help = "åˆ›å»ºé»˜è®¤çš„æ—¥è®°æ¨¡æ¿å’Œæ¯æ—¥é—®é¢˜"

    def handle(self, *args, **options):
        # åˆ›å»ºé»˜è®¤æ¨¡æ¿
        templates = [
            {
                "name": "ä»Šå¤©å°ç¡®å¹¸",
                "description": "è®°å½•ä»Šå¤©çš„å°ç¡®å¹¸æ—¶åˆ»",
                "content": "ä»Šå¤©{æœ€å¼€å¿ƒçš„äº‹}ï¼Œè®©æˆ‘æ„Ÿåˆ°{å¿ƒæƒ…}ã€‚{æ„Ÿæƒ³}",
                "category": "æƒ…æ„Ÿ",
                "icon": "ğŸŒˆ",
            },
            {
                "name": "ä¸‰ä»¶äº‹æ€»ç»“",
                "description": "æ€»ç»“ä»Šå¤©çš„ä¸‰ä»¶é‡è¦äº‹æƒ…",
                "content": "ä»Šå¤©åšäº†ä¸‰ä»¶äº‹ï¼š{ç¬¬ä¸€ä»¶äº‹}ï¼Œ{ç¬¬äºŒä»¶äº‹}ï¼Œ{ç¬¬ä¸‰ä»¶äº‹}ã€‚æœ€æœ‰æ„ä¹‰çš„æ˜¯{æ„Ÿæ‚Ÿ}",
                "category": "æ€»ç»“",
                "icon": "ğŸ“‹",
            },
            {
                "name": "æ„Ÿæ©æ—¥è®°",
                "description": "è®°å½•ä»Šå¤©æ„Ÿæ©çš„äº‹æƒ…",
                "content": "ä»Šå¤©æˆ‘æ„Ÿè°¢{æ„Ÿè°¢çš„äººæˆ–äº‹}ï¼Œå› ä¸º{åŸå› }ã€‚è¿™è®©æˆ‘è§‰å¾—{æ„Ÿå—}",
                "category": "æ„Ÿæ©",
                "icon": "ğŸ™",
            },
            {
                "name": "å­¦ä¹ è®°å½•",
                "description": "è®°å½•ä»Šå¤©å­¦åˆ°çš„ä¸œè¥¿",
                "content": "ä»Šå¤©æˆ‘å­¦ä¼šäº†{æ–°æŠ€èƒ½æˆ–çŸ¥è¯†}ï¼Œé€šè¿‡{å­¦ä¹ æ–¹å¼}ã€‚{æ”¶è·å’Œæ„Ÿæƒ³}",
                "category": "å­¦ä¹ ",
                "icon": "ğŸ“š",
            },
            {
                "name": "ç¾é£Ÿæ—¥è®°",
                "description": "è®°å½•ä»Šå¤©çš„ç¾é£Ÿä½“éªŒ",
                "content": "ä»Šå¤©åƒäº†{ç¾é£Ÿåç§°}ï¼Œåœ¨{åœ°ç‚¹}ã€‚å‘³é“{è¯„ä»·}ï¼Œ{æ„Ÿæƒ³}",
                "category": "ç”Ÿæ´»",
                "icon": "ğŸ½ï¸",
            },
            {
                "name": "è¿åŠ¨æ‰“å¡",
                "description": "è®°å½•ä»Šå¤©çš„è¿åŠ¨æƒ…å†µ",
                "content": "ä»Šå¤©è¿åŠ¨äº†{è¿åŠ¨ç±»å‹}ï¼ŒæŒç»­{æ—¶é•¿}ã€‚æ„Ÿè§‰{èº«ä½“çŠ¶æ€}ï¼Œ{å¿ƒæƒ…}",
                "category": "å¥åº·",
                "icon": "ğŸ’ª",
            },
            {
                "name": "é˜…è¯»ç¬”è®°",
                "description": "è®°å½•ä»Šå¤©çš„é˜…è¯»æ”¶è·",
                "content": "ä»Šå¤©è¯»äº†{ä¹¦åæˆ–æ–‡ç« }ï¼Œæœ€æœ‰å¯å‘çš„å†…å®¹æ˜¯{å†…å®¹æ‘˜è¦}ã€‚{ä¸ªäººæ€è€ƒ}",
                "category": "å­¦ä¹ ",
                "icon": "ğŸ“–",
            },
            {
                "name": "äººé™…äº’åŠ¨",
                "description": "è®°å½•ä»Šå¤©çš„äººé™…äº¤å¾€",
                "content": "ä»Šå¤©å’Œ{äººç‰©}è¿›è¡Œäº†{äº’åŠ¨ç±»å‹}ã€‚æˆ‘ä»¬èŠäº†{è¯é¢˜}ï¼Œ{æ„Ÿå—å’Œæ”¶è·}",
                "category": "ç¤¾äº¤",
                "icon": "ğŸ‘¥",
            },
        ]

        for template_data in templates:
            template, created = DiaryTemplate.objects.get_or_create(name=template_data["name"], defaults=template_data)
            if created:
                self.stdout.write(f"åˆ›å»ºæ¨¡æ¿: {template.name}")
            else:
                self.stdout.write(f"æ¨¡æ¿å·²å­˜åœ¨: {template.name}")

        # åˆ›å»ºæ¯æ—¥é—®é¢˜
        questions = [
            {"question": "å¦‚æœä»Šå¤©æ˜¯ä¸€ç§é£Ÿç‰©ï¼Œå®ƒä¼šæ˜¯ä»€ä¹ˆï¼Ÿ", "category": "æƒ³è±¡"},
            {"question": "ä»Šå¤©æœ€è®©ä½ å°è±¡æ·±åˆ»çš„é¢œè‰²æ˜¯ï¼Ÿ", "category": "æ„Ÿå®˜"},
            {"question": "ä»Šå¤©ä½ æœ€æƒ³æ„Ÿè°¢çš„äººæ˜¯è°ï¼Ÿ", "category": "æ„Ÿæ©"},
            {"question": "å¦‚æœç»™ä»Šå¤©çš„å¤©ç©ºèµ·ä¸ªåå­—ï¼Œä¼šå«ä»€ä¹ˆï¼Ÿ", "category": "æƒ³è±¡"},
            {"question": "ä»Šå¤©å­¦åˆ°äº†ä»€ä¹ˆæ–°ä¸œè¥¿å—ï¼Ÿ", "category": "å­¦ä¹ "},
            {"question": "ä»Šå¤©æœ€æœ‰è¶£çš„å¯¹è¯æ˜¯ä»€ä¹ˆï¼Ÿ", "category": "ç¤¾äº¤"},
            {"question": "å¦‚æœä»Šå¤©æœ‰ä¸ªæ ‡é¢˜ï¼Œä¼šæ˜¯ä»€ä¹ˆï¼Ÿ", "category": "æ€»ç»“"},
            {"question": "ä»Šå¤©æœ€æƒ³é‡æ–°ä½“éªŒçš„æ—¶åˆ»æ˜¯ï¼Ÿ", "category": "å›å‘³"},
            {"question": "ä»Šå¤©çš„ä½ å’Œæ˜¨å¤©ç›¸æ¯”æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ", "category": "åæ€"},
            {"question": "ä»Šå¤©æœ€æƒ³å¯¹è‡ªå·±è¯´çš„è¯æ˜¯ä»€ä¹ˆï¼Ÿ", "category": "è‡ªçœ"},
            {"question": "ä»Šå¤©çœ‹åˆ°çš„æœ€ç¾å¥½çš„äº‹ç‰©æ˜¯ï¼Ÿ", "category": "å‘ç°"},
            {"question": "ä»Šå¤©çš„å¿ƒæƒ…å¦‚æœæ˜¯å¤©æ°”ï¼Œä¼šæ˜¯æ€æ ·çš„ï¼Ÿ", "category": "æƒ…æ„Ÿ"},
            {"question": "ä»Šå¤©æœ€è®©ä½ ä¼šå¿ƒä¸€ç¬‘çš„ç¬é—´æ˜¯ï¼Ÿ", "category": "å¿«ä¹"},
            {"question": "å¦‚æœä»Šå¤©æ˜¯ä¸€é¦–æ­Œï¼Œä¼šæ˜¯ä»€ä¹ˆé£æ ¼ï¼Ÿ", "category": "æƒ³è±¡"},
            {"question": "ä»Šå¤©æœ€è®©ä½ æ„Ÿåˆ°æ¸©æš–çš„äº‹æƒ…æ˜¯ï¼Ÿ", "category": "æ¸©æš–"},
            {"question": "ä»Šå¤©ä½ åšçš„æœ€å‹‡æ•¢çš„äº‹æ˜¯ä»€ä¹ˆï¼Ÿ", "category": "å‹‡æ°”"},
            {"question": "ä»Šå¤©æœ€æƒ³è®°ä½çš„ç»†èŠ‚æ˜¯ï¼Ÿ", "category": "è®°å¿†"},
            {"question": "ä»Šå¤©è®©ä½ æ„Ÿåˆ°æƒŠè®¶çš„äº‹æƒ…æ˜¯ï¼Ÿ", "category": "æƒŠå–œ"},
            {"question": "å¦‚æœä»Šå¤©æœ‰ä¸€ä¸ªé¢œè‰²ä»£è¡¨ï¼Œä¼šæ˜¯ä»€ä¹ˆï¼Ÿ", "category": "æ„Ÿå—"},
            {"question": "ä»Šå¤©æœ€æƒ³åˆ†äº«ç»™æœ‹å‹çš„äº‹æƒ…æ˜¯ï¼Ÿ", "category": "åˆ†äº«"},
        ]

        for question_data in questions:
            question, created = DailyQuestion.objects.get_or_create(question=question_data["question"], defaults=question_data)
            if created:
                self.stdout.write(f"åˆ›å»ºé—®é¢˜: {question.question[:30]}...")

        self.stdout.write(self.style.SUCCESS(f"æˆåŠŸåˆ›å»ºäº† {len(templates)} ä¸ªæ¨¡æ¿å’Œ {len(questions)} ä¸ªæ¯æ—¥é—®é¢˜"))
